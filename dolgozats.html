<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML>
<HEAD>
<TITLE></TITLE>
</HEAD>
<BODY>
<A name=1></a><b>Tartalomjegyzék</b><br>
<b>1.&nbsp;Bevezetés</b><br>
<b>5</b><br>
1.1.&nbsp;Bevezetés<br>
.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.<br>
6<br>
<b>2.&nbsp;Adatbázisok&nbsp;történelme</b><br>
<b>7</b><br>
<b>3.&nbsp;Relációs&nbsp;adatbázisok</b><br>
<b>9</b><br>
3.1.&nbsp;Kialakulása&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;10<br>
3.2.&nbsp;Jellemzők&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;10<br>
3.2.1.&nbsp;Előnyei&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;10<br>
3.2.2.&nbsp;Hátrányai&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;11<br>
3.3.&nbsp;ORM<br>
Object-relational&nbsp;mapping&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.<br>
13<br>
<b>4.&nbsp;NoSQL&nbsp;adatbázisok</b><br>
<b>Az&nbsp;új&nbsp;szemlélet</b><br>
<b>17</b><br>
4.1.&nbsp;Bevezetés<br>
.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;18<br>
4.2.&nbsp;Miben&nbsp;más?&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;20<br>
4.3.&nbsp;Apache&nbsp;CouchDB&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;22<br>
4.3.1.&nbsp;Interfész&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;23<br>
A&nbsp;HTTP&nbsp;interfész&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;25<br>
4.3.2.&nbsp;Az&nbsp;adatmodell&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;25<br>
Dokumentum&nbsp;(Document)&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;25<br>
Nézet&nbsp;(View)&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;26<br>
4.4.&nbsp;MongoDB&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;29<br>
4.4.1.&nbsp;Interfész&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;30<br>
4.4.2.&nbsp;Az&nbsp;adatmodell&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;31<br>
Dokumentum&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;31<br>
Lekérdezések<br>
.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;32<br>
4.4.3.&nbsp;Fájltárolás&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;33<br>
1<br>
<hr>
<A name=2></a>TARTALOMJEGYZÉK<br>
TARTALOMJEGYZÉK<br>
<b>5.&nbsp;Foursquare</b><br>
<b>36</b><br>
5.1.&nbsp;Bevezetés<br>
.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;37<br>
5.2.&nbsp;MongoDB&nbsp;a&nbsp;Foursquare-nél<br>
.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;38<br>
5.2.1.&nbsp;Előnyök&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;38<br>
5.2.2.&nbsp;Hátrányok&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;.&nbsp;39<br>
<b>6.&nbsp;Összefoglalás</b><br>
<b>40</b><br>
2<br>
<hr>
<A name=3></a><b>Rövidítésjegyzék</b><br>
Apache&nbsp;Foundation&nbsp;TODO<br>
Apache&nbsp;webszerver&nbsp;TODO<br>
Autentikációs&nbsp;proxy&nbsp;TODO<br>
BSON<br>
TODO<br>
Cache<br>
TODO<br>
CERN<br>
TODO<br>
CMS&nbsp;(Content&nbsp;Management&nbsp;System)&nbsp;TODO<br>
CRUD<br>
TODO<br>
ETag&nbsp;fejléc&nbsp;(header)&nbsp;TODO<br>
Facebook<br>
TODO<br>
FAT&nbsp;fájlrendszer&nbsp;TODO<br>
Geolokalizáció&nbsp;TODO<br>
Hash&nbsp;függvény&nbsp;TODO<br>
HTML<br>
TODO<br>
HTML5<br>
TODO<br>
HTTP&nbsp;Client&nbsp;TODO<br>
JavaScript<br>
TODO<br>
key-value,&nbsp;kulcsérték&nbsp;TODO<br>
Konzol&nbsp;(MongoDB)&nbsp;TODO<br>
load-balancer&nbsp;TODO<br>
3<br>
<hr>
<A name=4></a>TARTALOMJEGYZÉK<br>
TARTALOMJEGYZÉK<br>
Lotus&nbsp;Notes<br>
Ma&nbsp;már&nbsp;IBM&nbsp;Lotus&nbsp;Notes,&nbsp;ugyanis&nbsp;1995-ben&nbsp;az&nbsp;IBM&nbsp;megvásárolta<br>
Lotus&nbsp;céget<br>
MapReduce<br>
TODO<br>
md&nbsp;hash<br>
TODO<br>
Membase<br>
TODO<br>
Microsoft&nbsp;SQL&nbsp;Server&nbsp;TODO<br>
MySQL<br>
TODO<br>
OOP,&nbsp;MOP<br>
TODO<br>
Oracle&nbsp;Database<br>
PostgreSQL<br>
Reguláris&nbsp;kifejezés<br>
relációs&nbsp;művelet&nbsp;TODO<br>
Replikáció<br>
TODO<br>
RESTful&nbsp;(webservice)&nbsp;TODO<br>
Sharding<br>
a&nbsp;vertikális&nbsp;skálázás&nbsp;egyik&nbsp;formája,&nbsp;ilyenkor&nbsp;egy&nbsp;adatbázis&nbsp;szerver<br>
mesterként&nbsp;funkcionál,&nbsp;bár&nbsp;adatokat&nbsp;nem&nbsp;tárol,&nbsp;és&nbsp;a&nbsp;mester&nbsp;irányítja<br>
a&nbsp;shardingbe&nbsp;bevont&nbsp;kliens&nbsp;szerveket,&nbsp;melyek&nbsp;önállóan&nbsp;működnek,<br>
azonban&nbsp;egyik&nbsp;kliensen&nbsp;sincs&nbsp;meg&nbsp;a&nbsp;teljes&nbsp;adatbázis,&nbsp;mindegyik&nbsp;csak<br>
az&nbsp;információ&nbsp;egy&nbsp;részét&nbsp;tartalmazza<br>
a&nbsp;kliensek&nbsp;nem&nbsp;tudják,&nbsp;hogy&nbsp;ők&nbsp;shardingbe&nbsp;vannak&nbsp;kötve<br>
SOAP&nbsp;(webservice)&nbsp;TODO<br>
SQL<br>
TODO<br>
SQLite<br>
TODO<br>
SSL&nbsp;proxy<br>
TODO<br>
Twitter<br>
TODO<br>
W3C<br>
TODO<br>
Wordpress<br>
TODO<br>
XML<br>
TODO<br>
4<br>
<hr>
<A name=5></a><b>1.&nbsp;fejezet</b><br>
<b>Bevezetés</b><br>
5<br>
<hr>
<A name=6></a>1.1.&nbsp;BEVEZETÉS<br>
FEJEZET&nbsp;1.&nbsp;BEVEZETÉS<br>
<b>1.1.</b><br>
<b>Bevezetés</b><br>
Az&nbsp;adatbázisok&nbsp;használata&nbsp;a&nbsp;számítógéppel&nbsp;egyidős,&nbsp;az&nbsp;adatok<br>
rendszerezése,&nbsp;karbantartása,&nbsp;kereshetősége&nbsp;a&nbsp;korábbi&nbsp;papíralapú<br>
rendszereknél&nbsp;komoly&nbsp;problémát&nbsp;okozott.&nbsp;A&nbsp;számítógép&nbsp;és&nbsp;internet<br>
alapú&nbsp;világban&nbsp;az&nbsp;adatbázisok&nbsp;használata&nbsp;mindennapossá&nbsp;vált,&nbsp;a&nbsp;szá-<br>
mítógépeken,&nbsp;telefonokon&nbsp;futó&nbsp;alkalmazások&nbsp;legnagyobb&nbsp;része&nbsp;használ<br>
valamilyen&nbsp;adatbázist.&nbsp;Eddig&nbsp;az&nbsp;adatbázis&nbsp;fogalma&nbsp;alatt&nbsp;mindenki&nbsp;egy<br>
relációs&nbsp;rendszerre&nbsp;gondolt,&nbsp;amely&nbsp;sok&nbsp;problémára&nbsp;megoldást&nbsp;nyújt,<br>
azonban&nbsp;legalább&nbsp;ennyire&nbsp;csak&nbsp;szuboptimális.&nbsp;A&nbsp;dolgozat&nbsp;olyan&nbsp;rend-<br>
szereket&nbsp;mutat&nbsp;be,&nbsp;amelyekkel&nbsp;megoldható&nbsp;a&nbsp;vertikális&nbsp;és&nbsp;a&nbsp;horizontális<br>
skálázhatóság,&nbsp;a&nbsp;cachelés&nbsp;és&nbsp;a&nbsp;memória&nbsp;optimális-&nbsp;és&nbsp;maximális&nbsp;ki-<br>
használása,&nbsp;a&nbsp;geolokalizációs&nbsp;információk&nbsp;natív&nbsp;indexelése&nbsp;és&nbsp;keresése,<br>
rugalmas&nbsp;méretű&nbsp;adatsorok,&nbsp;Mindez&nbsp;SQL&nbsp;tudás&nbsp;nélkül,&nbsp;megőrizve&nbsp;a<br>
relációs&nbsp;rendszerek&nbsp;legtöbb&nbsp;előnyét.<br>
A&nbsp;dokumentum-orientált&nbsp;adatbázisokkal&nbsp;az&nbsp;alkalmazások&nbsp;fejlesztése<br>
nem&nbsp;csak&nbsp;felgyorsulhat,&nbsp;hanem&nbsp;olyan&nbsp;problémákra&nbsp;is&nbsp;megoldást&nbsp;nyújt-<br>
hat,&nbsp;melyek&nbsp;megoldása&nbsp;relációs&nbsp;rendszerekkel&nbsp;lehetetlen&nbsp;vagy&nbsp;nagyon<br>
nehéz&nbsp;lenne.&nbsp;A&nbsp;rugalmas&nbsp;méretű&nbsp;adatsorok&nbsp;segítségével&nbsp;az&nbsp;adatbázis<br>
könnyedén&nbsp;felveszi&nbsp;az&nbsp;inkrementális&nbsp;fejlesztés&nbsp;támasztotta&nbsp;elvárásokat,<br>
és&nbsp;áthidalja&nbsp;a&nbsp;relációs&nbsp;adatbázisoknál&nbsp;gyakran&nbsp;felmerülő&nbsp;hézagos&nbsp;adat-<br>
feltöltés&nbsp;miatti&nbsp;átláthatatlanságot.<br>
A&nbsp;memória&nbsp;optimális&nbsp;kihasználásával&nbsp;(akár&nbsp;a&nbsp;teljes&nbsp;klaszter&nbsp;memóri-<br>
áját&nbsp;képes&nbsp;kihasználni),&nbsp;az&nbsp;adatbáziskezelő&nbsp;akár&nbsp;a&nbsp;relációs&nbsp;rendszerek<br>
válaszidejének&nbsp;töredéke&nbsp;alatt&nbsp;tudja&nbsp;kiszolgálni&nbsp;a&nbsp;kéréseket.<br>
Az&nbsp;alapértelmezetten&nbsp;szállított&nbsp;vertikális&nbsp;skálázással&nbsp;(sharding),&nbsp;egy-<br>
egy&nbsp;új&nbsp;szerver&nbsp;bekapcsolása&nbsp;a&nbsp;szolgáltatásba&nbsp;lerövidülhet,&nbsp;ezáltal&nbsp;csök-<br>
kentve&nbsp;az&nbsp;emberi&nbsp;erőforrásigényt,&nbsp;és&nbsp;növelve&nbsp;a&nbsp;szolgáltatásminőséget<br>
és&nbsp;folytonosságot.<br>
6<br>
<hr>
<A name=7></a><b>2.&nbsp;fejezet</b><br>
<b>Adatbázisok&nbsp;történelme</b><br>
7<br>
<hr>
<A name=8></a>FEJEZET&nbsp;2.&nbsp;ADATBÁZISOK&nbsp;TÖRTÉNELME<br>
Az&nbsp;adatbázisokat&nbsp;Gajdos&nbsp;Sándor&nbsp;a&nbsp;Budapesti&nbsp;Műszaki&nbsp;és&nbsp;Gazdaság-<br>
tudományi&nbsp;Egyetem&nbsp;adjunktusa&nbsp;a&nbsp;következőképpen&nbsp;deﬁniálja:&nbsp;<i>Adatok</i><br>
<i>gyors,&nbsp;gépesített&nbsp;tárolása&nbsp;és&nbsp;visszakeresése&nbsp;</i>(Gajdos,&nbsp;2006).<br>
Az&nbsp;adatbázisok&nbsp;használatára&nbsp;már&nbsp;a&nbsp;elektromechanikus&nbsp;számológépek<br>
idejében&nbsp;felmerült&nbsp;az&nbsp;igény,&nbsp;igaz&nbsp;ekkor&nbsp;még&nbsp;csak&nbsp;lyukkártyára&nbsp;lyukasz-<br>
tották&nbsp;az&nbsp;információkat.&nbsp;Az&nbsp;adatbázisok&nbsp;igazi&nbsp;térnyerése&nbsp;az&nbsp;1960-as<br>
évekre&nbsp;tehető,&nbsp;amikor&nbsp;a&nbsp;számítógépek&nbsp;megﬁzethetővé&nbsp;váltak&nbsp;a&nbsp;cégek<br>
számára.&nbsp;Tehát&nbsp;a&nbsp;’60-as&nbsp;évektől&nbsp;már&nbsp;nem&nbsp;csak&nbsp;a&nbsp;katonai&nbsp;szerepe&nbsp;volt<br>
a&nbsp;számítógépeknek,&nbsp;ezáltal&nbsp;az&nbsp;adatbázisokat&nbsp;használata&nbsp;is&nbsp;előtérbe&nbsp;ke-<br>
rült.&nbsp;Az&nbsp;ekkor&nbsp;használt&nbsp;rendszerek&nbsp;még&nbsp;az&nbsp;adatokat&nbsp;nem&nbsp;egy&nbsp;struktú-<br>
raként&nbsp;kezelték,&nbsp;hanem&nbsp;az&nbsp;egyes&nbsp;rekordokra&nbsp;helyezte&nbsp;a&nbsp;hangsúlyt.<br>
Az&nbsp;igazi&nbsp;áttörést,&nbsp;az&nbsp;IBM&nbsp;által&nbsp;az&nbsp;1970-es&nbsp;években&nbsp;létrehozott&nbsp;SQL<br>
lekérdező&nbsp;nyelv&nbsp;érte&nbsp;el,&nbsp;amely&nbsp;az&nbsp;iparágban&nbsp;egy&nbsp;de&nbsp;facto&nbsp;szabványként<br>
terjedt&nbsp;el.&nbsp;Ekkor&nbsp;jött&nbsp;létre&nbsp;a&nbsp;<i>relációs&nbsp;adatbáziskezelő&nbsp;rendszer&nbsp;</i>kifejezés<br>
is.<br>
Az&nbsp;1970-es&nbsp;évek&nbsp;után&nbsp;a&nbsp;mai&nbsp;napig,&nbsp;az&nbsp;adatbázisok&nbsp;kifejezés&nbsp;általában<br>
relációs&nbsp;rendszerrel&nbsp;asszociálható.&nbsp;Természetesen,&nbsp;a&nbsp;relációs&nbsp;rendszerek<br>
mellett&nbsp;megjelentek&nbsp;más&nbsp;adatbázis&nbsp;rendszerek,&nbsp;mely&nbsp;saját&nbsp;lekérdező-<br>
nyelvet&nbsp;használtak,&nbsp;azonban&nbsp;kiderült,&nbsp;hogy&nbsp;ezek&nbsp;sebessége&nbsp;és&nbsp;használ-<br>
hatósa&nbsp;nem&nbsp;veszi&nbsp;fel&nbsp;a&nbsp;versenyt&nbsp;a&nbsp;relációs&nbsp;társaikkal.<br>
8<br>
<hr>
<A name=9></a><b>3.&nbsp;fejezet</b><br>
<b>Relációs&nbsp;adatbázisok</b><br>
9<br>
<hr>
<A name=10></a>3.1.&nbsp;KIALAKULÁSA<br>
FEJEZET&nbsp;3.&nbsp;RELÁCIÓS&nbsp;ADATBÁZISOK<br>
<b>3.1.</b><br>
<b>Kialakulása</b><br>
A&nbsp;relációs&nbsp;adatbázis&nbsp;kifejezés&nbsp;Edgar&nbsp;Frank&nbsp;Codd1&nbsp;nevéhez&nbsp;fűződik,<br>
egy&nbsp;1970-ben&nbsp;kiadott,&nbsp;a&nbsp;&quot;A&nbsp;Relational&nbsp;Model&nbsp;of&nbsp;Data&nbsp;for&nbsp;Large&nbsp;Shared<br>
Data&nbsp;Banks&quot;&nbsp;című&nbsp;cikkében&nbsp;használta&nbsp;először&nbsp;ezt&nbsp;a&nbsp;fogalmat,&nbsp;és&nbsp;írta<br>
le&nbsp;12&nbsp;pontban&nbsp;mit&nbsp;ért&nbsp;a&nbsp;kifejezés&nbsp;alatt.<br>
<b>3.2.</b><br>
<b>Jellemzők</b><br>
A&nbsp;relációs&nbsp;adatbáziskezelő&nbsp;szoftverek&nbsp;közül&nbsp;a&nbsp;vállalati&nbsp;szegmensben<br>
a&nbsp;legelterjedtebb&nbsp;az&nbsp;Oracle&nbsp;Database,&nbsp;és&nbsp;a&nbsp;Microsoft&nbsp;SQL&nbsp;Server.&nbsp;A<br>
webes&nbsp;alkalmazásoknál&nbsp;előszeretettel&nbsp;alkalmazzák&nbsp;a&nbsp;MySQL&nbsp;illetve&nbsp;a<br>
PostgreSQL&nbsp;terméket.&nbsp;A&nbsp;mobiltelefonokban&nbsp;az&nbsp;alacsony&nbsp;erőforrásigé-<br>
nyéről&nbsp;ismert&nbsp;SQLite&nbsp;adatbázist.&nbsp;Az&nbsp;előző&nbsp;felsorolásból&nbsp;kitűnik,&nbsp;hogy&nbsp;a<br>
relációs&nbsp;adatbázisok&nbsp;felhasználási&nbsp;lehetőségei&nbsp;igen&nbsp;széleskörűek,&nbsp;hiszen<br>
egy&nbsp;bonyolult&nbsp;ERP&nbsp;rendszer,&nbsp;és&nbsp;a&nbsp;mobiltelefonon&nbsp;futó&nbsp;email&nbsp;kliens&nbsp;is<br>
ugyanarra&nbsp;az&nbsp;adatbázisrendszerre&nbsp;épít.&nbsp;A&nbsp;relációs&nbsp;adatbázisokban&nbsp;az<br>
információkat&nbsp;táblákba&nbsp;rendezzük,&nbsp;ezeknek&nbsp;kötött&nbsp;formája&nbsp;van,&nbsp;mivel<br>
előre&nbsp;meg&nbsp;kell&nbsp;határozni&nbsp;milyen&nbsp;oszlopok&nbsp;fognak&nbsp;szerepelni,&nbsp;illetve&nbsp;az<br>
oszlopoknak&nbsp;meg&nbsp;kell&nbsp;adni&nbsp;az&nbsp;adattípusát&nbsp;(szöveg,&nbsp;egész&nbsp;szám,&nbsp;lebegő-<br>
pontos&nbsp;szám,&nbsp;bináris&nbsp;adat,&nbsp;dátum,&nbsp;megjegyzés).&nbsp;Az&nbsp;adatok&nbsp;beviteléhez,<br>
és&nbsp;listázásához&nbsp;(legyen&nbsp;az&nbsp;akár&nbsp;egy&nbsp;graﬁkus&nbsp;felülettel&nbsp;ellátott&nbsp;adatbázis<br>
kezelő&nbsp;alkalmazás)&nbsp;az&nbsp;SQL&nbsp;lekérdező&nbsp;nyelvet&nbsp;használjuk,&nbsp;mellyel&nbsp;relá-<br>
ciós&nbsp;műveletek&nbsp;segítségével&nbsp;kapjuk&nbsp;meg&nbsp;a&nbsp;megfelelő&nbsp;a&nbsp;információkat.<br>
<b>3.2.1.</b><br>
<b>Előnyei</b><br>
<b>Relációk</b><br>
Mivel&nbsp;a&nbsp;legtöbb&nbsp;adat&nbsp;felírható&nbsp;valamilyen&nbsp;relációs&nbsp;formában&nbsp;vagy<br>
legalább&nbsp;összekapcsolható&nbsp;egy&nbsp;relációs&nbsp;művelettel,&nbsp;ezért&nbsp;az&nbsp;adat-<br>
bázisban&nbsp;szereplő&nbsp;rekordok&nbsp;kapcsolatban&nbsp;vannak&nbsp;egymással.<br>
1Brit&nbsp;tudós,&nbsp;IBM-nél&nbsp;dolgozott<br>
10<br>
<hr>
<A name=11></a>3.2.&nbsp;JELLEMZŐK<br>
FEJEZET&nbsp;3.&nbsp;RELÁCIÓS&nbsp;ADATBÁZISOK<br>
<b>Konzisztencia</b><br>
A&nbsp;táblák&nbsp;egymás&nbsp;közötti&nbsp;hivatkozásai,&nbsp;idegen&nbsp;kulcsai,&nbsp;amelyet&nbsp;az<br>
adatbázis&nbsp;ellenőriz&nbsp;és&nbsp;nem&nbsp;engedi&nbsp;rossz&nbsp;hivatkozások&nbsp;létrejöttét.<br>
Például&nbsp;egy&nbsp;könyvtári&nbsp;rendszer&nbsp;adatbázisában,&nbsp;olyan&nbsp;könyvet&nbsp;nem<br>
törölhetünk,&nbsp;melyre&nbsp;van&nbsp;hivatkozás&nbsp;a&nbsp;jelenleg&nbsp;kint&nbsp;lévő&nbsp;könyvek<br>
között<br>
<b>Indexelés</b><br>
Az&nbsp;adatbázisban&nbsp;történő&nbsp;keresést&nbsp;jelentősen&nbsp;felgyorsítja,&nbsp;mivel&nbsp;az<br>
indexfájlban&nbsp;megjelölésre&nbsp;kerülnek&nbsp;a&nbsp;rekordokban&nbsp;szereplő&nbsp;kifeje-<br>
zések,&nbsp;és&nbsp;azok&nbsp;helyei.<br>
<b>Redundancia</b><br>
Minden&nbsp;relációs&nbsp;rendszer&nbsp;a&nbsp;redundanciamentességre&nbsp;törekszik,<br>
azaz&nbsp;adatok&nbsp;többszöri&nbsp;jelenlétének&nbsp;elkerülésére.<br>
<b>Tranzakciók</b><br>
A&nbsp;tranzakciók&nbsp;segítségével&nbsp;egy&nbsp;komplex&nbsp;adatbeillesztés&nbsp;(több&nbsp;táb-<br>
lás&nbsp;beszúrások)&nbsp;hibája&nbsp;esetén,&nbsp;nem&nbsp;lesznek&nbsp;félig&nbsp;beillesztett&nbsp;infor-<br>
mációk,&nbsp;ugyanis&nbsp;hiba&nbsp;esetén&nbsp;a&nbsp;tranzakció&nbsp;visszavonható.<br>
A&nbsp;tranzakciók&nbsp;a&nbsp;pénzügyi&nbsp;rendszerek&nbsp;egyik&nbsp;alapja.<br>
<b>3.2.2.</b><br>
<b>Hátrányai</b><br>
<b>Rugalmatlanság</b><br>
Egy&nbsp;relációs&nbsp;adatbázis&nbsp;kevésbé&nbsp;ﬂexibilis,&nbsp;mert&nbsp;nehezen&nbsp;követi<br>
az&nbsp;inkrementális&nbsp;fejlesztés&nbsp;változó&nbsp;követelményeit,&nbsp;problémákat<br>
okozhat&nbsp;a&nbsp;verziókövetés,&nbsp;a&nbsp;visszafelé&nbsp;kompatibilitás.<br>
A&nbsp;különböző&nbsp;tulajdonságokkal&nbsp;rendelkező&nbsp;entitások&nbsp;leírása&nbsp;(pél-<br>
dául&nbsp;egy&nbsp;címjegyzék,&nbsp;ahol&nbsp;a&nbsp;kapcsolatok&nbsp;nagy&nbsp;részének&nbsp;egy&nbsp;vagy<br>
kettő&nbsp;telefonszáma&nbsp;van,&nbsp;de&nbsp;előfordulhat&nbsp;a&nbsp;három&nbsp;telefonszám,<br>
email&nbsp;cím,&nbsp;beosztás&nbsp;és&nbsp;még&nbsp;az&nbsp;egyes&nbsp;kontaktokhoz&nbsp;létrehozott<br>
egyéni&nbsp;mezők&nbsp;kombinációja&nbsp;is).<br>
11<br>
<hr>
<A name=12></a>3.2.&nbsp;JELLEMZŐK<br>
FEJEZET&nbsp;3.&nbsp;RELÁCIÓS&nbsp;ADATBÁZISOK<br>
A&nbsp;hézagos&nbsp;adatfeltöltések,&nbsp;amelyre&nbsp;jó&nbsp;példa&nbsp;az&nbsp;adóbevallás,&nbsp;ahol<br>
mindenkinél&nbsp;szerepel&nbsp;minden&nbsp;kitölthető&nbsp;mező,&nbsp;viszont&nbsp;a&nbsp;kitöltők<br>
mindössze&nbsp;a&nbsp;mezők&nbsp;töredék&nbsp;részét&nbsp;töltik&nbsp;ki.<br>
<b>Relációk</b><br>
Míg&nbsp;a&nbsp;legtöbb&nbsp;információ&nbsp;leírható&nbsp;relációkkal,&nbsp;azonban&nbsp;egy&nbsp;kö-<br>
zösségi&nbsp;oldalnál,&nbsp;ahol&nbsp;a&nbsp;felhasználók&nbsp;rengeteg&nbsp;mezőt&nbsp;kitölthetnek<br>
(név,&nbsp;lakcím,&nbsp;iskolák,&nbsp;email&nbsp;címek,&nbsp;stb.),&nbsp;és&nbsp;még&nbsp;saját&nbsp;mezőket&nbsp;is<br>
felvehetnek,&nbsp;a&nbsp;relációkat&nbsp;gyakran&nbsp;kudarcot&nbsp;vallanak.&nbsp;A&nbsp;problémát<br>
jól&nbsp;szemléltetheti&nbsp;egy&nbsp;gyógyszeradatbázis,&nbsp;ahol&nbsp;ki&nbsp;kell&nbsp;tölteni&nbsp;min-<br>
den&nbsp;gyógyszer&nbsp;alapanyagát,&nbsp;ez&nbsp;bizony&nbsp;sok&nbsp;oszlopot&nbsp;eredményez&nbsp;a<br>
táblákban,&nbsp;amelyek&nbsp;hézagos&nbsp;kitöltéssel&nbsp;és&nbsp;a&nbsp;<i>NULL&nbsp;</i>értékekkel&nbsp;a<br>
relációkat&nbsp;felborítják.<br>
Gyakran&nbsp;a&nbsp;sok&nbsp;relációval&nbsp;leírt&nbsp;adatok&nbsp;lekérdezése&nbsp;időigényes&nbsp;lehet,<br>
illetve&nbsp;sok&nbsp;információt&nbsp;nehéz&nbsp;leírni&nbsp;relációval,&nbsp;vagy&nbsp;az&nbsp;adatbázist<br>
feleslegesen&nbsp;bonyolultá&nbsp;teszi,&nbsp;éppen&nbsp;ezért&nbsp;megﬁgyelhető,&nbsp;hogy&nbsp;a<br>
komolyabb&nbsp;adattárházakban&nbsp;nem&nbsp;minden&nbsp;adatbázis&nbsp;a&nbsp;lehető&nbsp;leg-<br>
optimálisabb,&nbsp;mivel&nbsp;dönteni&nbsp;kell&nbsp;a&nbsp;teljesítmény&nbsp;és&nbsp;az&nbsp;áttekinthe-<br>
tőség&nbsp;között<br>
<b>Fregmentáció</b><br>
Az&nbsp;adatbázis&nbsp;valamilyen&nbsp;bináris&nbsp;fájlként&nbsp;a&nbsp;lemezen&nbsp;tárolódik,&nbsp;ha<br>
az&nbsp;adatbázis&nbsp;séma&nbsp;módosul&nbsp;egy&nbsp;új&nbsp;oszlop&nbsp;hozzáadásával,&nbsp;akkor<br>
már&nbsp;nem&nbsp;tudja&nbsp;az&nbsp;adatbáziskezelő&nbsp;rendszer&nbsp;hozzáfűzni&nbsp;az&nbsp;új&nbsp;osz-<br>
lopot&nbsp;a&nbsp;fájlhoz,&nbsp;hanem&nbsp;a&nbsp;lemezen&nbsp;a&nbsp;következő&nbsp;szabad&nbsp;részre&nbsp;ke-<br>
rül,&nbsp;így&nbsp;az&nbsp;adott&nbsp;táblából&nbsp;történő&nbsp;olvasáskor&nbsp;a&nbsp;diszk&nbsp;olvasófeje<br>
folyamatosan&nbsp;ugrálni&nbsp;fog,&nbsp;ezáltal&nbsp;válaszidők&nbsp;meghosszabbodását<br>
okozva.&nbsp;De&nbsp;hasonlóan&nbsp;problémás&nbsp;egy&nbsp;oszlop&nbsp;törlése,&nbsp;mivel&nbsp;az&nbsp;adat-<br>
bázis&nbsp;ﬁzikai&nbsp;méretének&nbsp;csökkenésével&nbsp;nem&nbsp;jár.&nbsp;Az&nbsp;adatbázis&nbsp;fájl-<br>
szerkezetét&nbsp;leginkább&nbsp;a&nbsp;FAT&nbsp;fájlrendszerhez&nbsp;lehetne&nbsp;hasonlítani,<br>
ahol&nbsp;a&nbsp;fregmentáció&nbsp;miatt&nbsp;gyakran&nbsp;szükséges&nbsp;töredezettségmen-<br>
12<br>
<hr>
<A name=13></a>3.3.&nbsp;ORM<br>OBJECT-RELATIONAL&nbsp;MAPPING<br>
FEJEZET&nbsp;3.&nbsp;RELÁCIÓS&nbsp;ADATBÁZISOK<br>
tesítést&nbsp;futtatni.<br>
Ez&nbsp;a&nbsp;probléma&nbsp;nem&nbsp;érinti&nbsp;az&nbsp;adatbázisban&nbsp;tárolt&nbsp;megjegyzéseket<br>
és&nbsp;bináris&nbsp;állományokat,&nbsp;mert&nbsp;azok&nbsp;az&nbsp;adatbázisrendszer&nbsp;külön<br>
tárolja&nbsp;(az&nbsp;oszlop&nbsp;méret&nbsp;ﬂexibilis&nbsp;mivolta&nbsp;miatt).<br>
<b>Hosszú&nbsp;válaszidők</b><br>
A&nbsp;nagy&nbsp;adatbázisoknál&nbsp;gyakori&nbsp;probléma,&nbsp;hogy&nbsp;a&nbsp;sok&nbsp;relációs&nbsp;kap-<br>
csolat&nbsp;hosszú&nbsp;válaszidőket&nbsp;okoz&nbsp;(sok&nbsp;táblás&nbsp;JOIN&nbsp;műveletek).<br>
<b>Bináris&nbsp;fájltárolási&nbsp;problémák</b><br>
A&nbsp;legtöbb&nbsp;relációs&nbsp;adatbázis&nbsp;támogatja&nbsp;a&nbsp;fájlok&nbsp;tárolását,&nbsp;azonban<br>
egy-egy&nbsp;fájllekérés&nbsp;hatalmas&nbsp;plusz&nbsp;terhelést&nbsp;ad&nbsp;a&nbsp;szervernek,&nbsp;így<br>
általában&nbsp;nem&nbsp;alkalmazzák<br>
<b>Memória&nbsp;(optimális)&nbsp;kihasználása</b><br>
Az&nbsp;egyes&nbsp;adatbázisrendszerek&nbsp;nem&nbsp;használják,&nbsp;vagy&nbsp;nem&nbsp;optimá-<br>
lisan&nbsp;használják&nbsp;ki&nbsp;a&nbsp;memória&nbsp;által&nbsp;nyújtott&nbsp;cachelési&nbsp;lehetősége-<br>
ket,&nbsp;ennek&nbsp;egyik&nbsp;oka,&nbsp;hogy&nbsp;a&nbsp;32&nbsp;bites&nbsp;architektúrákban&nbsp;a&nbsp;memória<br>
maximum&nbsp;3&nbsp;gigabájtig&nbsp;címezhető,&nbsp;így&nbsp;az&nbsp;adatbáziskezelő&nbsp;mindig&nbsp;a<br>
lemezre&nbsp;írta,&nbsp;és&nbsp;a&nbsp;lemezről&nbsp;olvasta&nbsp;az&nbsp;információkat,&nbsp;ezáltal&nbsp;hosszú<br>
válaszidőket&nbsp;eredményezve.<br>
<b>3.3.</b><br>
<b>ORM<br>Object-relational&nbsp;mapping</b><br>
Az&nbsp;ORM&nbsp;egy&nbsp;olyan&nbsp;programozási&nbsp;technika,&nbsp;melynek&nbsp;segítségével<br>
egy&nbsp;relációs&nbsp;adatbázist&nbsp;objektumokká&nbsp;tudunk&nbsp;konvertálni.<br>
<b>Miért&nbsp;van&nbsp;erre&nbsp;szükség?.</b><br>
Egyrészt&nbsp;a&nbsp;ma&nbsp;használt&nbsp;programozási&nbsp;nyel-<br>
vek&nbsp;legnagyobb&nbsp;része&nbsp;objektum-&nbsp;vagy&nbsp;legalább&nbsp;metaobjektum&nbsp;orien-<br>
tált,&nbsp;azaz&nbsp;leegyszerűsítve&nbsp;egy&nbsp;elemnek&nbsp;vannak&nbsp;tulajdonságai&nbsp;és&nbsp;speci-<br>
13<br>
<hr>
<A name=14></a><IMG src="dolgozat-14_1.png"><br>
3.3.&nbsp;ORM<br>OBJECT-RELATIONAL&nbsp;MAPPING<br>
FEJEZET&nbsp;3.&nbsp;RELÁCIÓS&nbsp;ADATBÁZISOK<br>
ális&nbsp;függvényei,&nbsp;illetve&nbsp;tudnak&nbsp;egymásból&nbsp;öröklődni&nbsp;és&nbsp;egymást&nbsp;kiegé-<br>
szíteni.&nbsp;Másrészt&nbsp;pedig&nbsp;nagy&nbsp;adatbázisoknál&nbsp;komoly&nbsp;problémát&nbsp;okoz<br>
az&nbsp;relációk&nbsp;felépítése&nbsp;a&nbsp;táblák&nbsp;között,&nbsp;mert&nbsp;olyan&nbsp;sok&nbsp;adatot&nbsp;tartal-<br>
maznak,&nbsp;a&nbsp;3.3&nbsp;ábra&nbsp;ezt&nbsp;kívánja&nbsp;szemléltetni.<br>
3.1.&nbsp;ábra.&nbsp;A&nbsp;népszerű&nbsp;Wordpress&nbsp;CMS&nbsp;adatbázisának&nbsp;felépítése<br>
A&nbsp;Wordpress,&nbsp;az&nbsp;egyik&nbsp;legismertebb&nbsp;PHP&nbsp;alapú&nbsp;tartalomkezelő<br>
14<br>
<hr>
<A name=15></a>3.3.&nbsp;ORM<br>OBJECT-RELATIONAL&nbsp;MAPPING<br>
FEJEZET&nbsp;3.&nbsp;RELÁCIÓS&nbsp;ADATBÁZISOK<br>
rendszer,&nbsp;2011.&nbsp;áprilisában&nbsp;közel&nbsp;20&nbsp;millió&nbsp;weboldalnál&nbsp;és&nbsp;blognál<br>
alkalmazzák.<br>
Az&nbsp;adatbázisának&nbsp;felépítése&nbsp;egyszerűnek&nbsp;mondható,&nbsp;bár&nbsp;már&nbsp;itt<br>
is&nbsp;problémát&nbsp;okozhat&nbsp;a&nbsp;különböző&nbsp;táblák&nbsp;és&nbsp;a&nbsp;táblákban&nbsp;szereplő<br>
oszlopok&nbsp;fejben&nbsp;tartása.&nbsp;Egy&nbsp;ERP&nbsp;rendszernél,&nbsp;ahol&nbsp;több&nbsp;száz&nbsp;tábla<br>
is&nbsp;lehet,&nbsp;táblánként&nbsp;több&nbsp;tíz&nbsp;oszloppal&nbsp;az&nbsp;átláthatóság&nbsp;szinte&nbsp;lehetetlen.<br>
A&nbsp;ORM&nbsp;használatakor&nbsp;a&nbsp;programozási&nbsp;nyelv&nbsp;SQL&nbsp;mondatokká<br>
alakítja&nbsp;a&nbsp;kérést,&nbsp;majd&nbsp;az&nbsp;adatbázis&nbsp;által&nbsp;visszaadott&nbsp;választ&nbsp;a&nbsp;me-<br>
móriában&nbsp;objektumokká&nbsp;alakítja,&nbsp;később&nbsp;az&nbsp;adatbázis&nbsp;írásakor&nbsp;az<br>
objektumokat&nbsp;visszaalakítja&nbsp;SQL&nbsp;mondatokká.<br>
Fontos&nbsp;megemlíteni&nbsp;az&nbsp;ilyenkor&nbsp;használt&nbsp;két&nbsp;technikát,&nbsp;az&nbsp;optimista<br>
és&nbsp;a&nbsp;pesszimista&nbsp;zárolást.<br>
<b>Optimista&nbsp;zárolás.</b><br>
Az&nbsp;optimista&nbsp;esetén&nbsp;a&nbsp;lekérdezés&nbsp;lefut,&nbsp;az&nbsp;adatok<br>
kiírásra&nbsp;kerülnek,&nbsp;majd&nbsp;visszaíráskor&nbsp;az&nbsp;adatbázis&nbsp;különböző&nbsp;időbé-<br>
lyegzők&nbsp;(timestamp)&nbsp;alapján&nbsp;eldönti,&nbsp;hogy&nbsp;frissült-e&nbsp;az&nbsp;adatbázis,<br>
tehát&nbsp;míg&nbsp;az&nbsp;egyik&nbsp;kliens&nbsp;módosítja&nbsp;az&nbsp;információkat&nbsp;addig&nbsp;mások<br>
hozzáférhetnek&nbsp;és&nbsp;akár&nbsp;ők&nbsp;is&nbsp;módosítják.<br>
<b>Pesszimista&nbsp;zárolás.</b><br>
A&nbsp;pesszimista&nbsp;zárolás&nbsp;esetén,&nbsp;ha&nbsp;egy&nbsp;kliens<br>
szerkesztésre&nbsp;megnyit&nbsp;valamit,&nbsp;akkor&nbsp;zárolásra&nbsp;kerülnek&nbsp;az&nbsp;adott<br>
sorok&nbsp;az&nbsp;adatbázisban,&nbsp;majd&nbsp;módosítás&nbsp;elküldése&nbsp;után&nbsp;válik&nbsp;lehetővé<br>
a&nbsp;többi&nbsp;kliens&nbsp;számára&nbsp;a&nbsp;módosítás,&nbsp;tehát&nbsp;ha&nbsp;egy&nbsp;kliens&nbsp;szerkeszti,&nbsp;a<br>
többiek&nbsp;csak&nbsp;megtekinteni&nbsp;tudják&nbsp;az&nbsp;információkat,&nbsp;a&nbsp;módosítás&nbsp;nem<br>
lehetséges.<br>
Azt,&nbsp;hogy&nbsp;az&nbsp;optimista&nbsp;vagy&nbsp;a&nbsp;pesszimista&nbsp;zárolást&nbsp;használjon<br>
15<br>
<hr>
<A name=16></a>3.3.&nbsp;ORM<br>OBJECT-RELATIONAL&nbsp;MAPPING<br>
FEJEZET&nbsp;3.&nbsp;RELÁCIÓS&nbsp;ADATBÁZISOK<br>
egy&nbsp;alkalmazás,&nbsp;az&nbsp;erősen&nbsp;függ&nbsp;a&nbsp;tárolt&nbsp;adatoktól.&nbsp;Például&nbsp;egy&nbsp;pénz-<br>
ügyi&nbsp;rendszer&nbsp;valószínűleg&nbsp;a&nbsp;pesszimista&nbsp;módszert&nbsp;fogja&nbsp;választani,<br>
míg&nbsp;egy&nbsp;egyszerű&nbsp;blognak&nbsp;megfelelő&nbsp;választás&nbsp;az&nbsp;optimista&nbsp;is.<br>
16<br>
<hr>
<A name=17></a><b>4.&nbsp;fejezet</b><br>
<b>NoSQL&nbsp;adatbázisok<br>Az&nbsp;új&nbsp;szemlélet</b><br>
17<br>
<hr>
<A name=18></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.1.&nbsp;BEVEZETÉS<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
<b>4.1.</b><br>
<b>Bevezetés</b><br>
Az&nbsp;előző&nbsp;fejezetben&nbsp;bemutatásra&nbsp;kerültek&nbsp;relációs&nbsp;adatbázisok,&nbsp;sok<br>
pozitív&nbsp;tulajdonsággal&nbsp;rendelkeznek&nbsp;ezért&nbsp;sok&nbsp;helyen,&nbsp;formában&nbsp;al-<br>
kalmazzák&nbsp;őket,&nbsp;mivel&nbsp;a&nbsp;legtöbb&nbsp;a&nbsp;probléma&nbsp;megoldásához&nbsp;kiválóan<br>
használhatóak.&nbsp;Azonban,&nbsp;mint&nbsp;a&nbsp;legtöbb&nbsp;rendszernél&nbsp;itt&nbsp;is&nbsp;szükséges<br>
kompromisszumokat&nbsp;kötni,&nbsp;rendelkeznek&nbsp;hátrányokkal&nbsp;is&nbsp;(3.2.2).&nbsp;Ezek<br>
a&nbsp;problémák&nbsp;nem&nbsp;érintenek&nbsp;minden&nbsp;alkalmazást,&nbsp;azonban&nbsp;egy-egy&nbsp;al-<br>
kalmazásban&nbsp;nem&nbsp;biztos,&nbsp;hogy&nbsp;egy&nbsp;relációs&nbsp;adatbázis&nbsp;a&nbsp;tökéletes&nbsp;meg-<br>
oldás,&nbsp;az&nbsp;ilyen&nbsp;problémák&nbsp;megoldására&nbsp;jöttek&nbsp;létre&nbsp;a&nbsp;NoSQL&nbsp;adatbá-<br>
zisok.<br>
Az&nbsp;első&nbsp;komolyabb&nbsp;adatbázis,&nbsp;amely&nbsp;szakított&nbsp;a&nbsp;klasszikus&nbsp;relációs<br>
megvalósítási&nbsp;formával&nbsp;az&nbsp;1989-ben&nbsp;megjelent&nbsp;Lotus&nbsp;Notes&nbsp;szerver&nbsp;ol-<br>
dali&nbsp;komponense&nbsp;a&nbsp;Lotus&nbsp;Domino&nbsp;volt.&nbsp;Természetesen&nbsp;már&nbsp;korábban<br>
is&nbsp;voltak&nbsp;próbálkozások,&nbsp;egészen&nbsp;pontosan&nbsp;az&nbsp;1980-as&nbsp;években&nbsp;kifej-<br>
lesztett&nbsp;BerkleyDB,&nbsp;vagy&nbsp;a&nbsp;szintén&nbsp;ekkor&nbsp;készült&nbsp;GT.M&nbsp;megoldás,&nbsp;de<br>
ezek&nbsp;nem&nbsp;tudtak&nbsp;elterjedni,&nbsp;illetve&nbsp;említésre&nbsp;méltó&nbsp;piaci&nbsp;részesedést<br>
elérni,&nbsp;ugyanis&nbsp;az&nbsp;1980-as&nbsp;években&nbsp;sem&nbsp;az&nbsp;(adatbázist&nbsp;használó)&nbsp;alkal-<br>
mazások&nbsp;száma&nbsp;nem&nbsp;volt&nbsp;magas,&nbsp;sem&nbsp;az&nbsp;alkalmazások&nbsp;nem&nbsp;igényeltek<br>
ennyire&nbsp;rugalmas&nbsp;adattárolási&nbsp;technikákat.<br>
A&nbsp;következő&nbsp;említésre&nbsp;méltó&nbsp;adatbáziskezelő&nbsp;az&nbsp;1997-ben&nbsp;elkészült&nbsp;Me-<br>
takit&nbsp;volt,&nbsp;melyet&nbsp;az&nbsp;első&nbsp;dokumentum-orientált&nbsp;adatbázisnak&nbsp;is&nbsp;tarta-<br>
nak,&nbsp;a&nbsp;termék&nbsp;sikerességét&nbsp;mutatja,&nbsp;hogy&nbsp;az&nbsp;Apple&nbsp;Mac&nbsp;OS&nbsp;X&nbsp;terméké-<br>
ben&nbsp;ezt&nbsp;használták&nbsp;a&nbsp;címjegyzék&nbsp;adatbázisának.&nbsp;A&nbsp;Metakit&nbsp;legutóbbi<br>
verziója&nbsp;2007-ben&nbsp;jelent&nbsp;meg&nbsp;és&nbsp;a&nbsp;fejlesztői&nbsp;levelezőlistája&nbsp;még&nbsp;a&nbsp;mai<br>
napig&nbsp;aktív.<br>
A&nbsp;bizonyos&nbsp;dotkomluﬁ&nbsp;kipukkanása&nbsp;a&nbsp;NoSQL&nbsp;adatbázisoknak&nbsp;is<br>
hatalmas&nbsp;lökést&nbsp;adott,&nbsp;melyet&nbsp;a&nbsp;következő&nbsp;felsorolás&nbsp;szemléltet:<br>
Memcached&nbsp;(2003)<br>
<i>Key-value&nbsp;(kulcs-érték)</i>,&nbsp;bárki&nbsp;számára&nbsp;ingyenesen&nbsp;használható<br>
18<br>
<hr>
<A name=19></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.1.&nbsp;BEVEZETÉS<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
adatbázis,&nbsp;amely&nbsp;a&nbsp;memóriában&nbsp;tárolja&nbsp;az&nbsp;adatokat,&nbsp;így&nbsp;biztosítva<br>
a&nbsp;rövid&nbsp;válaszidőket.&nbsp;Számos&nbsp;projektben&nbsp;használják&nbsp;átmeneti&nbsp;tá-<br>
rolóegységként&nbsp;(cache),&nbsp;ezáltal&nbsp;csökkentve&nbsp;az&nbsp;adatbázisrendszer<br>
terhelését,&nbsp;és&nbsp;az&nbsp;alkalmazás&nbsp;erőforrásigényét.<br>
Mivel&nbsp;a&nbsp;Memcached&nbsp;csak&nbsp;kulcs-érték&nbsp;adatbázis,&nbsp;így&nbsp;csak&nbsp;nagyon<br>
egyszerű&nbsp;adatstruktúrát&nbsp;érdemes&nbsp;benne&nbsp;tárolni,&nbsp;szerializált&nbsp;szöve-<br>
gek&nbsp;használatával&nbsp;bonyolultabb&nbsp;struktúrákat&nbsp;elhelyezése&nbsp;is&nbsp;meg-<br>
oldható,&nbsp;azonban&nbsp;ekkor&nbsp;le&nbsp;kell&nbsp;mondani&nbsp;a&nbsp;keresésről,&nbsp;és&nbsp;az&nbsp;inde-<br>
xelhetőségről.<br>
Google&nbsp;BigTable&nbsp;(2004)<br>
A&nbsp;Google&nbsp;saját&nbsp;fejlesztésű&nbsp;teljesen&nbsp;zárt&nbsp;adatbázisa,&nbsp;külső&nbsp;fejlesz-<br>
tőknek&nbsp;számára&nbsp;nem&nbsp;érhető&nbsp;el,&nbsp;ma&nbsp;már&nbsp;a&nbsp;legtöbb&nbsp;Google&nbsp;termék<br>
ezt&nbsp;használja&nbsp;(Reader,&nbsp;Youtube,&nbsp;Mail,&nbsp;Maps).<br>
Apache&nbsp;CouchDB&nbsp;(2005)<br>
Az&nbsp;<i>Apache&nbsp;Foundation&nbsp;</i>termékét&nbsp;a&nbsp;Lotus&nbsp;Notes&nbsp;ihlette&nbsp;adatbázis<br>
alapjaira&nbsp;fejlesztették,&nbsp;az&nbsp;igazi&nbsp;elterjedése&nbsp;az&nbsp;elmúlt&nbsp;két&nbsp;évben<br>
indult&nbsp;meg.&nbsp;A&nbsp;CouchDB-vel&nbsp;a&nbsp;4.3&nbsp;fejezet&nbsp;foglalkozik&nbsp;bővebben.<br>
A&nbsp;következő&nbsp;időszak,&nbsp;amelyet&nbsp;körülbelül&nbsp;2005-től&nbsp;számítunk&nbsp;a&nbsp;we-<br>
bes&nbsp;alkalmazások&nbsp;folyamatos&nbsp;térnyerése&nbsp;idézte&nbsp;elő.&nbsp;Ide&nbsp;tartozik&nbsp;a&nbsp;Go-<br>
ogle&nbsp;email&nbsp;szolgáltatása,&nbsp;a&nbsp;GMail,&nbsp;a&nbsp;Twitter,&nbsp;és&nbsp;a&nbsp;Facebook.&nbsp;Ekkor<br>
(2007)&nbsp;jelent&nbsp;meg,&nbsp;a&nbsp;mára&nbsp;komoly&nbsp;hírnevet&nbsp;kivívó&nbsp;adatbázis,&nbsp;a&nbsp;Mon-<br>
goDB,&nbsp;mely&nbsp;későbbiekben&nbsp;részletesen&nbsp;bemutatásra&nbsp;kerül&nbsp;a&nbsp;4.4&nbsp;fejezet-<br>
ben.&nbsp;2008-ban&nbsp;pedig&nbsp;a&nbsp;Facebook&nbsp;által&nbsp;nyílt&nbsp;forráskódúvá&nbsp;(open-source)<br>
tett&nbsp;Cassandra&nbsp;projekt,&nbsp;amelynek&nbsp;fejlesztéséért&nbsp;az&nbsp;Apache&nbsp;Foundation<br>
a&nbsp;felelős.&nbsp;A&nbsp;Cassandra&nbsp;a&nbsp;kimagaslóan&nbsp;jó&nbsp;skálázhatóságának&nbsp;köszönhe-<br>
tően&nbsp;ma&nbsp;már&nbsp;a&nbsp;Facebook,&nbsp;és&nbsp;a&nbsp;Twitter&nbsp;is&nbsp;ezt&nbsp;használja.&nbsp;A&nbsp;Cassandra<br>
skálázása&nbsp;és&nbsp;replikációja&nbsp;mögött&nbsp;a&nbsp;peer-to-peer&nbsp;technológia&nbsp;áll,&nbsp;ezáltal<br>
növelve&nbsp;az&nbsp;adatbázis&nbsp;rendelkezésre&nbsp;állási&nbsp;idejét.<br>
2010-ben&nbsp;jelent&nbsp;meg&nbsp;a&nbsp;Membase,&nbsp;a&nbsp;Memcached&nbsp;klaszterekre&nbsp;szánt&nbsp;ver-<br>
19<br>
<hr>
<A name=20></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.2.&nbsp;MIBEN&nbsp;MÁS?<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
ziója,&nbsp;melynek&nbsp;segítségével&nbsp;akár&nbsp;egy&nbsp;több&nbsp;száz&nbsp;gépből&nbsp;álló&nbsp;szerverpark<br>
memóriája&nbsp;válik&nbsp;használhatóvá&nbsp;gyorsítótárazásra.<br>
<b>4.2.</b><br>
<b>Miben&nbsp;más?</b><br>
A&nbsp;NoSQL&nbsp;adatbázisok&nbsp;létrejötte&nbsp;az&nbsp;ún.&nbsp;<i>új&nbsp;típusú&nbsp;</i>alkalmazások<br>
megjelenésének&nbsp;köszönhető.&nbsp;De&nbsp;mit&nbsp;is&nbsp;jelent&nbsp;az&nbsp;új&nbsp;típusú?&nbsp;A&nbsp;következő<br>
egyszerű&nbsp;példán&nbsp;keresztül&nbsp;hamarabb&nbsp;megérthetjük:<br>
Van&nbsp;egy&nbsp;regisztrációs&nbsp;űrlap,&nbsp;amit&nbsp;a&nbsp;cég&nbsp;ügyfeleinek&nbsp;kell&nbsp;kitölteni&nbsp;az<br>
adott&nbsp;cég&nbsp;honlapján.&nbsp;Szerepelnek&nbsp;az&nbsp;űrlapon&nbsp;az&nbsp;ügyfél&nbsp;legfontosabb<br>
információi&nbsp;(név,&nbsp;lakcím,&nbsp;születési&nbsp;dátum,&nbsp;fénykép,&nbsp;beszélt&nbsp;nyelvek).<br>
A&nbsp;szerveroldalon&nbsp;egy&nbsp;relációs&nbsp;adatbázisba&nbsp;kerülnek&nbsp;elmentésre&nbsp;az<br>
adatok.&nbsp;Ezzel&nbsp;idáig&nbsp;nincs&nbsp;is&nbsp;semmi&nbsp;probléma,&nbsp;az&nbsp;ügyfelek&nbsp;kitöltik,&nbsp;a<br>
cég&nbsp;pedig&nbsp;tud&nbsp;keresni,&nbsp;szűrni&nbsp;a&nbsp;kitöltött&nbsp;űrlapok&nbsp;között&nbsp;illetve&nbsp;meg<br>
tudja&nbsp;tekinteni&nbsp;őket.<br>
De&nbsp;mi&nbsp;történik&nbsp;ha&nbsp;fel&nbsp;kell&nbsp;venni&nbsp;a&nbsp;mezők&nbsp;közé&nbsp;még&nbsp;egy&nbsp;plusz&nbsp;in-<br>
formációt&nbsp;(telefonszám,&nbsp;Facebook&nbsp;proﬁl)?&nbsp;Amennyiben&nbsp;nincs&nbsp;erre<br>
felkészítve&nbsp;a&nbsp;rendszer,&nbsp;bár&nbsp;ha&nbsp;fel&nbsp;is&nbsp;van,&nbsp;biztosan&nbsp;nem&nbsp;lesz&nbsp;tökéletes<br>
az&nbsp;adatbázis&nbsp;struktúra,&nbsp;ugyanis&nbsp;ebben&nbsp;az&nbsp;esetben&nbsp;a&nbsp;különböző&nbsp;mezők<br>
típusa&nbsp;vagy&nbsp;mindig&nbsp;szöveg,&nbsp;vagy&nbsp;rengeteg&nbsp;felesleges&nbsp;oszlop&nbsp;lesz&nbsp;az<br>
adatbázisunkban,&nbsp;így&nbsp;elérve,&nbsp;hogy&nbsp;minden&nbsp;adat&nbsp;a&nbsp;neki&nbsp;megfelelő&nbsp;típus-<br>
ban&nbsp;legyen&nbsp;elmentve&nbsp;(szöveg,&nbsp;dátum,&nbsp;fájl).&nbsp;Tehát&nbsp;ha&nbsp;nincs&nbsp;felkészítve<br>
az&nbsp;adatbázis&nbsp;erre,&nbsp;akkor&nbsp;fel&nbsp;kell&nbsp;venni&nbsp;a&nbsp;kapcsolatot&nbsp;a&nbsp;honlapot&nbsp;készítő<br>
céggel,&nbsp;és&nbsp;nekik&nbsp;ki&nbsp;kell&nbsp;ezt&nbsp;javítani&nbsp;a&nbsp;honlapon,&nbsp;mind&nbsp;a&nbsp;szerver-,&nbsp;mind<br>
a&nbsp;kliensoldalon&nbsp;és&nbsp;az&nbsp;adatbázisban&nbsp;is,&nbsp;ez&nbsp;arányaiban&nbsp;véve&nbsp;nagyon&nbsp;sok<br>
idő.&nbsp;Ehhez&nbsp;a&nbsp;munkához&nbsp;szükség&nbsp;van&nbsp;legalább&nbsp;az&nbsp;adatbázisért&nbsp;felelős<br>
személyre,&nbsp;egy&nbsp;kliens-&nbsp;és&nbsp;egy&nbsp;szerveroldali&nbsp;programozóra.<br>
Azonban&nbsp;mi&nbsp;történik,&nbsp;ha&nbsp;egy&nbsp;NoSQL&nbsp;adatbázis&nbsp;dolgozik&nbsp;a&nbsp;háttérben?<br>
Az&nbsp;eredeti&nbsp;feladat&nbsp;megoldása&nbsp;itt&nbsp;sem&nbsp;okoz&nbsp;komolyabb&nbsp;problémát,<br>
viszont&nbsp;ha&nbsp;ki&nbsp;kell&nbsp;egészíteni&nbsp;azzal&nbsp;a&nbsp;bizonyos&nbsp;plusz&nbsp;mezővel,&nbsp;könnyedén<br>
20<br>
<hr>
<A name=21></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.2.&nbsp;MIBEN&nbsp;MÁS?<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
megtehető&nbsp;(az&nbsp;adatbázis&nbsp;módosítása&nbsp;nélkül),&nbsp;ugyanis&nbsp;nincs&nbsp;megkötve,<br>
hogy&nbsp;hány&nbsp;oszlopból&nbsp;kell&nbsp;állnia&nbsp;egy&nbsp;sornak,&nbsp;illetve&nbsp;milyen&nbsp;adattípus<br>
szerepelhet&nbsp;az&nbsp;adott&nbsp;oszlopokban&nbsp;(gyenge&nbsp;típusosság).<br>
Ezek&nbsp;után&nbsp;könnyen&nbsp;levonatható&nbsp;a&nbsp;tanulság,&nbsp;hogy&nbsp;milyen&nbsp;rend-<br>
szerekben&nbsp;alkalmazható&nbsp;jól&nbsp;egy&nbsp;NoSQL&nbsp;adatbázis:&nbsp;folyamatosan<br>
módosuló&nbsp;adatszerkezeteknél,&nbsp;a&nbsp;felhasználók&nbsp;által&nbsp;testreszabható<br>
megoldásoknál,&nbsp;illetve&nbsp;az&nbsp;eltérő&nbsp;entitásokkal&nbsp;rendelkező&nbsp;adatstruktú-<br>
ráknál.<br>
Bár&nbsp;a&nbsp;dokumentum-orientált&nbsp;adatbázisok&nbsp;eme&nbsp;rugalmassága&nbsp;egy&nbsp;ké-<br>
nyelmes&nbsp;megoldásnak&nbsp;tűnik&nbsp;a&nbsp;relációs&nbsp;adatbázisokhoz&nbsp;képest,&nbsp;azonban<br>
ezt&nbsp;már&nbsp;a&nbsp;legkorábbi&nbsp;key-value&nbsp;adatbázisok&nbsp;is&nbsp;könnyedén&nbsp;meg&nbsp;tudták<br>
oldani.&nbsp;A&nbsp;NoSQL&nbsp;adatbázisok&nbsp;valódi&nbsp;sikerének&nbsp;kulcsa&nbsp;azokban&nbsp;a<br>
szolgáltatásokban&nbsp;rejtezik,&nbsp;melyet&nbsp;a&nbsp;mai&nbsp;modern&nbsp;alkalmazásfejlesztési<br>
problémák&nbsp;hoztak&nbsp;a&nbsp;felszínre:<br>
Teljes&nbsp;szöveges&nbsp;keresés&nbsp;(full-text&nbsp;search)<br>
A&nbsp;teljes&nbsp;szöveges&nbsp;keresés&nbsp;lehetősége&nbsp;a&nbsp;legtöbb&nbsp;relációs&nbsp;adatbázis-<br>
ban&nbsp;megtalálható,&nbsp;azonban&nbsp;a&nbsp;fejlesztők&nbsp;ahol&nbsp;lehet,&nbsp;megpróbálják<br>
az&nbsp;adatkeresés&nbsp;ezen&nbsp;a&nbsp;módját&nbsp;elkerülni&nbsp;lassúsága&nbsp;miatt.<br>
az&nbsp;SQL&nbsp;nyelv<br>
Az&nbsp;SQL&nbsp;nyelv&nbsp;bármennyire&nbsp;is&nbsp;beszélt&nbsp;nyelv&nbsp;közeli,&nbsp;egy&nbsp;komolyabb<br>
méretű&nbsp;adatbázisnál&nbsp;problémákat&nbsp;okozhat&nbsp;(erre&nbsp;jelenthet&nbsp;megol-<br>
dást&nbsp;a&nbsp;3.3&nbsp;fejezetben&nbsp;kifejtett&nbsp;ORM).<br>
Problémák&nbsp;forrása&nbsp;lehet,&nbsp;a&nbsp;tíz&nbsp;tábla&nbsp;feletti,&nbsp;szűréssel&nbsp;és&nbsp;aggregá-<br>
cióval&nbsp;ellátott&nbsp;lekérdezések&nbsp;megírása&nbsp;és&nbsp;átlátása.<br>
SQL-ben&nbsp;nem&nbsp;jellemző,&nbsp;hogy&nbsp;a&nbsp;fejlesztők&nbsp;kommentekkel&nbsp;egészíte-<br>
nék&nbsp;ki&nbsp;az&nbsp;SQL&nbsp;mondatokat,&nbsp;amely&nbsp;szintén&nbsp;megértési&nbsp;problémát<br>
okozhat.<br>
21<br>
<hr>
<A name=22></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.3.&nbsp;APACHE&nbsp;COUCHDB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
Geolokalizáció<br>
Ma&nbsp;már&nbsp;sok&nbsp;alkalmazás&nbsp;használ&nbsp;geolokalizációt,&nbsp;gondoljunk&nbsp;itt<br>
a&nbsp;legtöbb&nbsp;közösségi&nbsp;hálózatra&nbsp;(Facebook,&nbsp;Twitter),&nbsp;vagy&nbsp;éppen&nbsp;a<br>
webes&nbsp;térképszoftverekre&nbsp;(Bing&nbsp;Maps,&nbsp;Google&nbsp;Maps).<br>
Bináris&nbsp;fájlok&nbsp;tárolása<br>
A&nbsp;legtöbb&nbsp;NoSQL&nbsp;adatbázist&nbsp;fájltárolási&nbsp;támogatással&nbsp;szállítják,<br>
amely&nbsp;szakít&nbsp;a&nbsp;relációs&nbsp;rendszerek&nbsp;bináris&nbsp;állományok&nbsp;tárolásá-<br>
nak&nbsp;technikájával.&nbsp;A&nbsp;fájlok&nbsp;strukturáltan&nbsp;tárolódnak,&nbsp;általában<br>
szétdarabolva,&nbsp;a&nbsp;gyors&nbsp;elérés&nbsp;érdekében.<br>
Horizontális,&nbsp;vertikális&nbsp;skálázhatóság<br>
A&nbsp;horizontális&nbsp;skálázás&nbsp;a&nbsp;legtöbb&nbsp;relációs&nbsp;rendszerben&nbsp;megtalál-<br>
ható,&nbsp;ezt&nbsp;nevezik&nbsp;replikációnak,&nbsp;azonban&nbsp;ilyenkor&nbsp;a&nbsp;kliens&nbsp;(<i>slave</i>)<br>
vár&nbsp;a&nbsp;mester&nbsp;(<i>master&nbsp;</i>)&nbsp;szerverre&nbsp;üzenetére,&nbsp;hogy&nbsp;milyen&nbsp;változás<br>
történt&nbsp;az&nbsp;adatbázisban,&nbsp;amelyet&nbsp;a&nbsp;kliens&nbsp;is&nbsp;végrehajt.&nbsp;A&nbsp;verti-<br>
kális&nbsp;skálázás&nbsp;is&nbsp;általában&nbsp;replikációval&nbsp;történik,&nbsp;azonban&nbsp;ez&nbsp;nem<br>
kliens-mester&nbsp;replikáció,&nbsp;hanem&nbsp;mester-mester,&nbsp;ahol&nbsp;minden&nbsp;szer-<br>
ver&nbsp;kliensként&nbsp;és&nbsp;mesterként&nbsp;is&nbsp;rész&nbsp;vesz&nbsp;a&nbsp;kommunikációban.<br>
<b>4.3.</b><br>
<b>Apache&nbsp;CouchDB</b><br>
A&nbsp;CouchDB&nbsp;az&nbsp;Apache&nbsp;webszerver&nbsp;fejlesztéséért&nbsp;is&nbsp;felelős&nbsp;Apache<br>
Foundation&nbsp;terméke.&nbsp;Az&nbsp;első&nbsp;verzió&nbsp;2005-ben&nbsp;jelent&nbsp;meg.&nbsp;Az&nbsp;adatbá-<br>
zis&nbsp;felépítése&nbsp;erősen&nbsp;hasonlít&nbsp;a&nbsp;IBM&nbsp;Lotus&nbsp;Notes&nbsp;termékére,&nbsp;ugyanis&nbsp;a<br>
projekt&nbsp;vezető&nbsp;fejlesztője,&nbsp;Damien&nbsp;Katz,&nbsp;korábban&nbsp;a&nbsp;Lotus&nbsp;Notes&nbsp;fej-<br>
lesztésében&nbsp;is&nbsp;részt&nbsp;vett.<br>
Az&nbsp;információk&nbsp;tárolása&nbsp;adatbázisokban&nbsp;és&nbsp;dokumentumokban&nbsp;tör-<br>
ténik.&nbsp;Az&nbsp;adatok&nbsp;eléréséhez&nbsp;nincs&nbsp;szükség&nbsp;SQL&nbsp;tudásra,&nbsp;ugyanis&nbsp;Ja-<br>
vascript&nbsp;segítségével&nbsp;végezhetők&nbsp;el&nbsp;a&nbsp;szűrések&nbsp;-amelyet&nbsp;nézetnek&nbsp;(view-<br>
nak)&nbsp;neveznek,&nbsp;egészen&nbsp;pontosan&nbsp;a&nbsp;MapReduce&nbsp;használatával.<br>
22<br>
<hr>
<A name=23></a><IMG src="dolgozat-23_1.png"><br>
<IMG src="dolgozat-23_2.png"><br>
FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.3.&nbsp;APACHE&nbsp;COUCHDB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
<b>4.3.1.</b><br>
<b>Interfész</b><br>
A&nbsp;CouchDB&nbsp;felépítése&nbsp;eltér&nbsp;a&nbsp;klasszikus&nbsp;adatbázisoktól.&nbsp;Az&nbsp;4.1<br>
ábrán&nbsp;látható&nbsp;egy&nbsp;alkalmazás&nbsp;általános&nbsp;kapcsolódási&nbsp;interfésze,&nbsp;itt&nbsp;az<br>
alkalmazás&nbsp;natív&nbsp;driverekkel&nbsp;(DLL&nbsp;fájl,&nbsp;vagy&nbsp;megosztott&nbsp;könyvtár)<br>
kapcsolódik&nbsp;az&nbsp;adatbázishoz.<br>
4.1.&nbsp;ábra.&nbsp;Példa&nbsp;egy&nbsp;általános&nbsp;kapcsolódási&nbsp;interfészre<br>
A&nbsp;4.2&nbsp;ábrán&nbsp;látható,&nbsp;ahogyan&nbsp;egy&nbsp;alkalmazás&nbsp;csatlakozhat&nbsp;CouchDB-<br>
hez,&nbsp;itt&nbsp;azonban&nbsp;nincs&nbsp;szükség,&nbsp;semmilyen&nbsp;illesztőre,&nbsp;mindössze&nbsp;egy<br>
HTTP&nbsp;kliensre.&nbsp;Ennek&nbsp;az&nbsp;az&nbsp;előnye,&nbsp;hogy&nbsp;bármilyen&nbsp;programozási<br>
nyelvből&nbsp;indítható&nbsp;kérés&nbsp;az&nbsp;adatbázis&nbsp;felé.&nbsp;Persze&nbsp;ennek&nbsp;van&nbsp;hátránya<br>
is,&nbsp;a&nbsp;lekérések&nbsp;nem&nbsp;lesznek&nbsp;olyan&nbsp;gyorsak,&nbsp;mint&nbsp;egy&nbsp;natív&nbsp;driver<br>
segítségével.<br>
4.2.&nbsp;ábra.&nbsp;Kapcsolódás&nbsp;CouchDB-hez&nbsp;szerver&nbsp;oldali&nbsp;rétegen&nbsp;keresztül<br>
Viszont&nbsp;a&nbsp;4.3&nbsp;ábrán&nbsp;látható&nbsp;kapcsolódás,&nbsp;már&nbsp;talán&nbsp;jobban&nbsp;meg-<br>
magyarázza,&nbsp;miért&nbsp;jó&nbsp;a&nbsp;HTTP&nbsp;interfész.&nbsp;Ha&nbsp;egy&nbsp;weboldalt&nbsp;veszünk<br>
23<br>
<hr>
<A name=24></a><IMG src="dolgozat-24_1.png"><br>
FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.3.&nbsp;APACHE&nbsp;COUCHDB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
példának,&nbsp;akkor&nbsp;a&nbsp;kliens&nbsp;maga&nbsp;a&nbsp;böngésző&nbsp;lesz,&nbsp;akkor&nbsp;szerveroldali<br>
programozási&nbsp;nyelv&nbsp;használata&nbsp;nélkül&nbsp;lehetségessé&nbsp;válik&nbsp;az&nbsp;informá-<br>
ciók&nbsp;megjelenítése.<br>
<b>Miért&nbsp;jó&nbsp;ez?</b><br>
Az&nbsp;egyszerű&nbsp;honlapoknál,&nbsp;a&nbsp;szerveroldali&nbsp;rész&nbsp;(legyen&nbsp;az&nbsp;PHP,<br>
ASP.NET&nbsp;vagy&nbsp;Perl)&nbsp;feladata&nbsp;mindössze&nbsp;annyi,&nbsp;hogy&nbsp;kapcsolódik&nbsp;az<br>
adatbázishoz,&nbsp;majd&nbsp;a&nbsp;lekérdezés&nbsp;eredménye&nbsp;alapján,&nbsp;felépíti&nbsp;a&nbsp;meg-<br>
felelő&nbsp;HTML&nbsp;oldalt.&nbsp;Ha&nbsp;levesszük&nbsp;HTML&nbsp;tartalom&nbsp;összeállításának<br>
terhét&nbsp;a&nbsp;szerverről,&nbsp;tehát&nbsp;kliensoldalon&nbsp;építjük&nbsp;fel,&nbsp;rengeteg&nbsp;erőforrás<br>
spórolható&nbsp;meg,&nbsp;ezáltal&nbsp;költséghatékonyabb&nbsp;szerver&nbsp;üzemeltetést&nbsp;ér-<br>
hető&nbsp;el,&nbsp;így&nbsp;tulajdonképpen&nbsp;az&nbsp;ügyfél&nbsp;erőforrásaival&nbsp;ﬁzet&nbsp;a&nbsp;szolgáltatás<br>
használatáért.<br>
Azonban&nbsp;ennek&nbsp;a&nbsp;technikának&nbsp;is&nbsp;van&nbsp;hátránya,&nbsp;mivel&nbsp;ami&nbsp;a&nbsp;webolda-<br>
laknál&nbsp;kliensoldalon&nbsp;(böngészőben)&nbsp;történik&nbsp;az&nbsp;bárki&nbsp;számára&nbsp;látható,<br>
ezért&nbsp;itt&nbsp;kiemelt&nbsp;szerepet&nbsp;kap&nbsp;a&nbsp;biztonság.&nbsp;Szerencsére&nbsp;a&nbsp;CouchDB<br>
nyújt&nbsp;lehetőséget&nbsp;a&nbsp;különböző&nbsp;adatbázisok&nbsp;jelszóval&nbsp;levédésére,&nbsp;illetve<br>
kívülről&nbsp;láthatatlanná&nbsp;tételére.&nbsp;Ilyenkor&nbsp;fontos,&nbsp;hogy&nbsp;csak&nbsp;azokat&nbsp;az<br>
adatbázisokat&nbsp;legyenek&nbsp;engedélyezve&nbsp;megtekintésre&nbsp;(kliensoldalról<br>
elérhető),&nbsp;amelyek&nbsp;nem&nbsp;tartalmaznak&nbsp;érzékeny&nbsp;információkat,&nbsp;például<br>
a&nbsp;regisztrált&nbsp;felhasználók&nbsp;vagy&nbsp;az&nbsp;adminisztrátorok&nbsp;személyes&nbsp;adatai.<br>
4.3.&nbsp;ábra.&nbsp;A&nbsp;kliens&nbsp;közvetlen&nbsp;kapcsolódása&nbsp;az&nbsp;adatbázishoz<br>
24<br>
<hr>
<A name=25></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.3.&nbsp;APACHE&nbsp;COUCHDB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
<b>A&nbsp;HTTP&nbsp;interfész</b><br>
A&nbsp;CouchDB&nbsp;HTTP&nbsp;interfésze&nbsp;egy&nbsp;RESTful&nbsp;webszolgáltatás,&nbsp;mely<br>
jelentősen&nbsp;eltér&nbsp;a&nbsp;webszolgáltatások&nbsp;által&nbsp;korábban&nbsp;preferált&nbsp;SOAP<br>
technikától.&nbsp;Itt&nbsp;ugyanis&nbsp;nem&nbsp;egy&nbsp;XML&nbsp;fájl&nbsp;segítségével&nbsp;történik&nbsp;a&nbsp;web-<br>
szerver&nbsp;utasítása,&nbsp;hanem&nbsp;standard&nbsp;HTTP&nbsp;kérésekkel.&nbsp;Dokumentumok<br>
lekérdezése&nbsp;GET-,&nbsp;egy&nbsp;adott&nbsp;dokumentum&nbsp;lekérdezése&nbsp;(az&nbsp;azonosítója<br>
megadásával)&nbsp;szintén&nbsp;GET&nbsp;kéréssel&nbsp;történik.&nbsp;A&nbsp;létrehozás&nbsp;POST,&nbsp;a<br>
frissítés&nbsp;PUT&nbsp;(azonosító&nbsp;megadása&nbsp;szükséges),&nbsp;míg&nbsp;a&nbsp;törlés&nbsp;DELETE<br>
(azonosító&nbsp;megadása&nbsp;szükséges)&nbsp;kérés&nbsp;küldésével&nbsp;hajtható&nbsp;végre.&nbsp;Meg-<br>
ﬁgyelhető,&nbsp;hogy&nbsp;a&nbsp;kérések&nbsp;mennyire&nbsp;jól&nbsp;tükrözik&nbsp;a&nbsp;CRUD&nbsp;műveleteket.<br>
<b>Miért&nbsp;HTTP,&nbsp;és&nbsp;nem&nbsp;natív&nbsp;interfész?.</b><br>
A&nbsp;HTTP&nbsp;interfész&nbsp;nagy&nbsp;előnye,<br>
hogy&nbsp;ugyanazok&nbsp;az&nbsp;eszközök&nbsp;használhatók&nbsp;a&nbsp;performancia&nbsp;javítása<br>
érdekében,&nbsp;mint&nbsp;a&nbsp;webes&nbsp;alapú&nbsp;rendszereknél:&nbsp;terhelés&nbsp;elosztás&nbsp;(load-<br>
balancer),&nbsp;gyorsítótárak&nbsp;(cache),&nbsp;SSL-&nbsp;és&nbsp;autentikációs&nbsp;proxy.&nbsp;Például<br>
a&nbsp;dokumentumok&nbsp;revíziós&nbsp;száma&nbsp;kiválóan&nbsp;használható&nbsp;ETag&nbsp;fejlécként<br>
a&nbsp;cache&nbsp;szerveren.<br>
<b>4.3.2.</b><br>
<b>Az&nbsp;adatmodell</b><br>
<b>Dokumentum&nbsp;(Document)</b><br>
A&nbsp;CouchDB&nbsp;adatstruktúrájának&nbsp;legfontosabb&nbsp;része&nbsp;a&nbsp;dokumentum,<br>
amely&nbsp;megközelítőleg&nbsp;a&nbsp;relációs&nbsp;adatbázisok&nbsp;megadott&nbsp;táblájának&nbsp;egy<br>
sorának&nbsp;feleltethető&nbsp;meg.&nbsp;Egy&nbsp;dokumentumban&nbsp;mezők&nbsp;találhatóak,<br>
melyek&nbsp;kulcs-érték&nbsp;formában&nbsp;jelennek&nbsp;meg.&nbsp;A&nbsp;kulcs&nbsp;bármilyen&nbsp;szöveg<br>
lehet,&nbsp;míg&nbsp;az&nbsp;érték&nbsp;a&nbsp;következők&nbsp;egyike:<br>
•&nbsp;szöveg&nbsp;(string)<br>
•&nbsp;egész&nbsp;szám&nbsp;(integer)<br>
25<br>
<hr>
<A name=26></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.3.&nbsp;APACHE&nbsp;COUCHDB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
•&nbsp;lebegőpontos&nbsp;szám&nbsp;(ﬂoat)<br>
•&nbsp;dátum&nbsp;(Javascript&nbsp;Date)<br>
•&nbsp;objektumok&nbsp;(Javascript&nbsp;object,&nbsp;Array)<br>
Továbbá&nbsp;tartalmazhat&nbsp;hivatkozásokat&nbsp;más&nbsp;dokumentumra&nbsp;(URL-k),<br>
azonban&nbsp;nem&nbsp;kerül&nbsp;ellenőrzése&nbsp;a&nbsp;hivatkozás,&nbsp;illetve&nbsp;az&nbsp;adatbázis&nbsp;nem<br>
tartja&nbsp;fenn&nbsp;a&nbsp;konzisztenciát.<br>
A&nbsp;dokumentumok&nbsp;egymásba&nbsp;nem&nbsp;ágyazhatók.<br>
A&nbsp;4.4&nbsp;ábrán&nbsp;látható&nbsp;a&nbsp;dolgozat&nbsp;egy&nbsp;részlete&nbsp;CouchDB&nbsp;adatbázis-<br>
ban&nbsp;tárolva.&nbsp;A&nbsp;dolgozat&nbsp;címe,&nbsp;készítési&nbsp;ideje,&nbsp;és&nbsp;tartalma&nbsp;hasonlóan<br>
van&nbsp;tárolva,&nbsp;mint&nbsp;egy&nbsp;relációs&nbsp;rendszerben,&nbsp;azonban&nbsp;megﬁgyelhető,<br>
hogy&nbsp;míg&nbsp;egy&nbsp;relációs&nbsp;adatbázisban&nbsp;a&nbsp;címkékhez&nbsp;és&nbsp;a&nbsp;kommentekhez<br>
biztosan&nbsp;szükséges&nbsp;lenne&nbsp;egy&nbsp;kereszttábla&nbsp;beiktatása,&nbsp;itt&nbsp;egyszerűen<br>
egy&nbsp;tömbbel&nbsp;kifejezhetjük&nbsp;az&nbsp;egy&nbsp;a&nbsp;többes&nbsp;kapcsolatot.<br>
A&nbsp;dokumentum&nbsp;azonosítója&nbsp;(&quot;_id&quot;&nbsp;mező)&nbsp;egy&nbsp;128&nbsp;bites,&nbsp;automati-<br>
kusan&nbsp;generált&nbsp;érték&nbsp;(tehát&nbsp;a&nbsp;CouchDB&nbsp;egy&nbsp;adatbázisban&nbsp;maximum<br>
3.438&nbsp;dokumentumot&nbsp;tud&nbsp;tárolni).&nbsp;A&nbsp;revíziós&nbsp;szám&nbsp;is&nbsp;egy&nbsp;generált<br>
érték,&nbsp;azonban&nbsp;ez&nbsp;csak&nbsp;32&nbsp;bites,&nbsp;és&nbsp;egy&nbsp;hash&nbsp;függvény&nbsp;állítja&nbsp;elő.<br>
A&nbsp;revizíós&nbsp;szám&nbsp;használatával&nbsp;a&nbsp;dokumentum&nbsp;minden&nbsp;frissítéskor,<br>
ﬁzikailag&nbsp;egy&nbsp;új&nbsp;dokumentum&nbsp;jön&nbsp;létre.&nbsp;A&nbsp;lekérdezésekben&nbsp;ez&nbsp;nem<br>
látható,&nbsp;ez&nbsp;mindössze&nbsp;a&nbsp;CouchDB-nek&nbsp;szükséges,&nbsp;ugyanis&nbsp;így&nbsp;tárolja<br>
különböző&nbsp;verziókat&nbsp;és&nbsp;a&nbsp;revíziós&nbsp;számmal&nbsp;oldja&nbsp;meg&nbsp;a&nbsp;tranzakciókat<br>
illetve&nbsp;replikációt&nbsp;is&nbsp;(Anderson,&nbsp;Lehnardt&nbsp;and&nbsp;Slater,&nbsp;2010).<br>
A&nbsp;dokumentumok&nbsp;szerializált&nbsp;JSON&nbsp;adatként&nbsp;kerülnek&nbsp;a&nbsp;lemezre.<br>
<b>Nézet&nbsp;(View)</b><br>
CouchDB-ben&nbsp;minden&nbsp;lekérdezést,&nbsp;csoportosítást,&nbsp;sorba&nbsp;rendezést<br>
nézetnek&nbsp;neveznek.<br>
26<br>
<hr>
<A name=27></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.3.&nbsp;APACHE&nbsp;COUCHDB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
1<br>
{<br>
2<br>
&quot;&nbsp;_id&nbsp;&quot;:&nbsp;&quot;&nbsp;a&nbsp;0&nbsp;4&nbsp;0&nbsp;e&nbsp;0&nbsp;0&nbsp;4&nbsp;1&nbsp;8&nbsp;9&nbsp;9&nbsp;6&nbsp;a&nbsp;e&nbsp;9&nbsp;6&nbsp;e&nbsp;9&nbsp;1&nbsp;e&nbsp;f&nbsp;9&nbsp;9&nbsp;8&nbsp;f&nbsp;0&nbsp;0&nbsp;0&nbsp;e&nbsp;e&nbsp;a&nbsp;&quot;&nbsp;,<br>
3<br>
&quot;&nbsp;_&nbsp;r&nbsp;e&nbsp;v&nbsp;&quot;:&nbsp;&quot;1&nbsp;-3&nbsp;f&nbsp;a&nbsp;b&nbsp;4&nbsp;4&nbsp;5&nbsp;2&nbsp;6&nbsp;d&nbsp;5&nbsp;d&nbsp;7&nbsp;d&nbsp;3&nbsp;a&nbsp;5&nbsp;2&nbsp;a&nbsp;b&nbsp;1&nbsp;7&nbsp;6&nbsp;1&nbsp;b&nbsp;3&nbsp;2&nbsp;3&nbsp;a&nbsp;b&nbsp;6&nbsp;2&nbsp;&quot;&nbsp;,<br>
4<br>
&quot;&nbsp;cím&nbsp;&quot;:&nbsp;&quot;&nbsp;D&nbsp;o&nbsp;k&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;u&nbsp;m&nbsp;-&nbsp;o&nbsp;r&nbsp;i&nbsp;e&nbsp;n&nbsp;t&nbsp;ált&nbsp;a&nbsp;d&nbsp;a&nbsp;t&nbsp;b&nbsp;á&nbsp;z&nbsp;i&nbsp;s&nbsp;o&nbsp;k&nbsp;&quot;&nbsp;,<br>
5<br>
&quot;&nbsp;címkék&nbsp;&quot;:&nbsp;[&quot;&nbsp;n&nbsp;o&nbsp;s&nbsp;q&nbsp;l&nbsp;&quot;&nbsp;,&nbsp;&quot;&nbsp;c&nbsp;o&nbsp;u&nbsp;c&nbsp;h&nbsp;d&nbsp;b&nbsp;&quot;&nbsp;,&nbsp;&quot;&nbsp;skálá&nbsp;z&nbsp;h&nbsp;a&nbsp;t&nbsp;óság&nbsp;&quot;&nbsp;,&nbsp;&quot;&nbsp;m&nbsp;a&nbsp;p&nbsp;r&nbsp;e&nbsp;d&nbsp;u&nbsp;c&nbsp;e&nbsp;&quot;]&nbsp;,<br>
6<br>
&quot;&nbsp;lé&nbsp;t&nbsp;r&nbsp;e&nbsp;h&nbsp;o&nbsp;z&nbsp;v&nbsp;a&nbsp;&quot;:&nbsp;&quot;&nbsp;Wed&nbsp;Apr&nbsp;20&nbsp;2&nbsp;0&nbsp;1&nbsp;1&nbsp;1&nbsp;1&nbsp;:&nbsp;4&nbsp;5&nbsp;:&nbsp;1&nbsp;5&nbsp;GMT&nbsp;+&nbsp;0&nbsp;2&nbsp;0&nbsp;0&nbsp;(&nbsp;C&nbsp;E&nbsp;S&nbsp;T&nbsp;)&quot;&nbsp;,<br>
7<br>
&quot;&nbsp;t&nbsp;a&nbsp;r&nbsp;t&nbsp;a&nbsp;l&nbsp;o&nbsp;m&nbsp;&quot;:&nbsp;&quot;&nbsp;C&nbsp;o&nbsp;u&nbsp;c&nbsp;h&nbsp;D&nbsp;B&nbsp;az&nbsp;A&nbsp;p&nbsp;a&nbsp;c&nbsp;h&nbsp;e&nbsp;F&nbsp;o&nbsp;u&nbsp;n&nbsp;d&nbsp;a&nbsp;t&nbsp;i&nbsp;o&nbsp;n&nbsp;t&nbsp;e&nbsp;r&nbsp;m&nbsp;éke&nbsp;...&quot;&nbsp;,<br>
8<br>
&quot;&nbsp;k&nbsp;o&nbsp;m&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;e&nbsp;k&nbsp;&quot;:&nbsp;[{<br>
9<br>
&quot;&nbsp;f&nbsp;e&nbsp;l&nbsp;h&nbsp;a&nbsp;s&nbsp;z&nbsp;n&nbsp;áló&quot;:&nbsp;{<br>
10<br>
&quot;&nbsp;név&nbsp;&quot;:&nbsp;&quot;&nbsp;f&nbsp;e&nbsp;l&nbsp;h&nbsp;a&nbsp;s&nbsp;z&nbsp;n&nbsp;áló1&quot;&nbsp;,<br>
11<br>
&quot;&nbsp;ip&nbsp;&quot;:&nbsp;&quot;&nbsp;1&nbsp;2&nbsp;.&nbsp;1&nbsp;2&nbsp;.&nbsp;1&nbsp;2&nbsp;.&nbsp;1&nbsp;2&nbsp;&quot;<br>
12<br>
}&nbsp;,<br>
13<br>
&quot;ü&nbsp;z&nbsp;e&nbsp;n&nbsp;e&nbsp;t&nbsp;&quot;:&nbsp;&quot;&nbsp;C&nbsp;o&nbsp;u&nbsp;c&nbsp;h&nbsp;D&nbsp;B&nbsp;-&nbsp;a&nbsp;d&nbsp;o&nbsp;k&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;u&nbsp;m&nbsp;-&nbsp;o&nbsp;r&nbsp;i&nbsp;e&nbsp;n&nbsp;t&nbsp;ált&nbsp;a&nbsp;d&nbsp;a&nbsp;t&nbsp;b&nbsp;ázis&nbsp;.&quot;<br>
14<br>
}]&nbsp;,<br>
15<br>
&quot;&nbsp;_&nbsp;r&nbsp;e&nbsp;v&nbsp;s&nbsp;_&nbsp;i&nbsp;n&nbsp;f&nbsp;o&nbsp;&quot;:&nbsp;[{<br>
16<br>
&quot;&nbsp;rev&nbsp;&quot;:&nbsp;&quot;1&nbsp;-3&nbsp;f&nbsp;a&nbsp;b&nbsp;4&nbsp;4&nbsp;5&nbsp;2&nbsp;6&nbsp;d&nbsp;5&nbsp;d&nbsp;7&nbsp;d&nbsp;3&nbsp;a&nbsp;5&nbsp;2&nbsp;a&nbsp;b&nbsp;1&nbsp;7&nbsp;6&nbsp;1&nbsp;b&nbsp;3&nbsp;2&nbsp;3&nbsp;a&nbsp;b&nbsp;6&nbsp;2&nbsp;&quot;&nbsp;,<br>
17<br>
&quot;&nbsp;s&nbsp;t&nbsp;a&nbsp;t&nbsp;u&nbsp;s&nbsp;&quot;:&nbsp;&quot;&nbsp;a&nbsp;v&nbsp;a&nbsp;i&nbsp;l&nbsp;a&nbsp;b&nbsp;l&nbsp;e&nbsp;&quot;<br>
18<br>
}]<br>
19<br>
}<br>
4.4.&nbsp;ábra.&nbsp;Egy&nbsp;egyszerű&nbsp;CouchDB&nbsp;dokumentum<br>
A&nbsp;nézetek&nbsp;JavaScriptben&nbsp;írt&nbsp;függvények,&nbsp;amelyek&nbsp;nem&nbsp;tudják<br>
módosítani&nbsp;az&nbsp;adatbázisban&nbsp;tárolt&nbsp;adatokat,&nbsp;csak&nbsp;a&nbsp;elvégzik&nbsp;a&nbsp;szűrést<br>
(vagy&nbsp;csoportosítást,&nbsp;vagy&nbsp;éppen&nbsp;a&nbsp;sorba&nbsp;rendezést).<br>
A&nbsp;JavaScript&nbsp;függvények&nbsp;MapReduce&nbsp;alapúak,&nbsp;tehát&nbsp;minden&nbsp;függ-<br>
vénynek&nbsp;létezik&nbsp;egy&nbsp;<i>map&nbsp;</i>és&nbsp;egy&nbsp;<i>reduce&nbsp;</i>része.<br>
<b>Map.</b><br>
A&nbsp;map&nbsp;függvénynek&nbsp;egy&nbsp;paramétere&nbsp;van,&nbsp;ez&nbsp;pedig&nbsp;egy&nbsp;doku-<br>
mentum,&nbsp;a&nbsp;függvényben&nbsp;itt&nbsp;végezhető&nbsp;az&nbsp;adott&nbsp;dokumentumra&nbsp;vonat-<br>
kozó&nbsp;szűrés.&nbsp;A&nbsp;4.5&nbsp;ábrán&nbsp;látható&nbsp;a&nbsp;CouchDB&nbsp;map&nbsp;függvénye&nbsp;használat<br>
közben,&nbsp;ahol&nbsp;a&nbsp;dokumentum&nbsp;címére&nbsp;szűrünk&nbsp;rá,&nbsp;tehát&nbsp;kijelenthető,<br>
hogy&nbsp;a&nbsp;map&nbsp;megfelel&nbsp;a&nbsp;relációs&nbsp;adatbázis&nbsp;adatbázis&nbsp;szűrés&nbsp;(WHERE)<br>
záradékának.<br>
Amennyiben&nbsp;a&nbsp;cím&nbsp;megfelel&nbsp;a&nbsp;feltételnek,&nbsp;akkor&nbsp;átadásra&nbsp;kerül&nbsp;reduce<br>
függvénynek&nbsp;az&nbsp;<i>emit&nbsp;</i>használatával.&nbsp;<i>Introduction&nbsp;to&nbsp;CouchDB&nbsp;Views</i><br>
27<br>
<hr>
<A name=28></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.3.&nbsp;APACHE&nbsp;COUCHDB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
1<br>
<b>f&nbsp;u&nbsp;n&nbsp;c&nbsp;t&nbsp;i&nbsp;o&nbsp;n&nbsp;</b>(&nbsp;d&nbsp;o&nbsp;c&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;)&nbsp;{<br>
2<br>
<b>if&nbsp;</b>(&nbsp;d&nbsp;o&nbsp;c&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;.&nbsp;t&nbsp;i&nbsp;t&nbsp;l&nbsp;e&nbsp;===&nbsp;&quot;&nbsp;D&nbsp;o&nbsp;k&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;u&nbsp;m&nbsp;-&nbsp;o&nbsp;r&nbsp;i&nbsp;e&nbsp;n&nbsp;t&nbsp;ált&nbsp;a&nbsp;d&nbsp;a&nbsp;t&nbsp;b&nbsp;á&nbsp;z&nbsp;i&nbsp;s&nbsp;o&nbsp;k&nbsp;&quot;&nbsp;)&nbsp;{<br>
3<br>
e&nbsp;m&nbsp;i&nbsp;t&nbsp;(&nbsp;<b>null&nbsp;</b>,&nbsp;{<br>
4<br>
&quot;&nbsp;cím&nbsp;&quot;:&nbsp;d&nbsp;o&nbsp;c&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;[&nbsp;&quot;&nbsp;cím&nbsp;&quot;&nbsp;]&nbsp;,<br>
5<br>
&quot;&nbsp;címkék&nbsp;&quot;:&nbsp;d&nbsp;o&nbsp;c&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;[&nbsp;&quot;&nbsp;címkék&nbsp;&quot;&nbsp;]&nbsp;,<br>
6<br>
&quot;&nbsp;lé&nbsp;t&nbsp;r&nbsp;e&nbsp;h&nbsp;o&nbsp;z&nbsp;v&nbsp;a&nbsp;&quot;:&nbsp;d&nbsp;o&nbsp;c&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;[&nbsp;&quot;&nbsp;lé&nbsp;t&nbsp;r&nbsp;e&nbsp;h&nbsp;o&nbsp;z&nbsp;v&nbsp;a&nbsp;&quot;&nbsp;]&nbsp;,<br>
7<br>
&quot;&nbsp;t&nbsp;a&nbsp;r&nbsp;t&nbsp;a&nbsp;l&nbsp;o&nbsp;m&nbsp;&quot;:&nbsp;d&nbsp;o&nbsp;c&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;[&nbsp;&quot;&nbsp;t&nbsp;a&nbsp;r&nbsp;t&nbsp;a&nbsp;l&nbsp;o&nbsp;m&nbsp;&quot;&nbsp;]<br>
8<br>
&quot;&nbsp;k&nbsp;o&nbsp;m&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;e&nbsp;k&nbsp;&quot;:&nbsp;d&nbsp;o&nbsp;c&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;[&nbsp;&quot;&nbsp;k&nbsp;o&nbsp;m&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;e&nbsp;k&nbsp;&quot;&nbsp;]<br>
9<br>
});<br>
10<br>
}<br>
11<br>
}<br>
4.5.&nbsp;ábra.&nbsp;A&nbsp;CouchDB&nbsp;Map&nbsp;függvénye<br>
2011<br>
1<br>
<b>f&nbsp;u&nbsp;n&nbsp;c&nbsp;t&nbsp;i&nbsp;o&nbsp;n&nbsp;</b>(&nbsp;d&nbsp;o&nbsp;c&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;)&nbsp;{<br>
2<br>
d&nbsp;o&nbsp;c&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;.&nbsp;c&nbsp;o&nbsp;m&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;s&nbsp;&amp;&amp;<br>
3<br>
d&nbsp;o&nbsp;c&nbsp;u&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;[&nbsp;&quot;&nbsp;k&nbsp;o&nbsp;m&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;e&nbsp;k&nbsp;&quot;&nbsp;].&nbsp;f&nbsp;o&nbsp;r&nbsp;E&nbsp;a&nbsp;c&nbsp;h&nbsp;(&nbsp;<b>f&nbsp;u&nbsp;n&nbsp;c&nbsp;t&nbsp;i&nbsp;o&nbsp;n&nbsp;</b>(&nbsp;k&nbsp;o&nbsp;m&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;)&nbsp;{<br>
4<br>
e&nbsp;m&nbsp;i&nbsp;t&nbsp;(&nbsp;k&nbsp;o&nbsp;m&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;[&nbsp;&quot;&nbsp;f&nbsp;e&nbsp;l&nbsp;h&nbsp;a&nbsp;s&nbsp;z&nbsp;n&nbsp;áló&quot;&nbsp;][&nbsp;&quot;&nbsp;név&nbsp;&quot;&nbsp;]&nbsp;,&nbsp;1&nbsp;);<br>
5<br>
});<br>
6<br>
}<br>
7<br>
8<br>
<b>f&nbsp;u&nbsp;n&nbsp;c&nbsp;t&nbsp;i&nbsp;o&nbsp;n&nbsp;</b>(&nbsp;nev&nbsp;,&nbsp;k&nbsp;o&nbsp;m&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;S&nbsp;z&nbsp;a&nbsp;m&nbsp;){<br>
9<br>
<b>r&nbsp;e&nbsp;t&nbsp;u&nbsp;r&nbsp;n&nbsp;</b>{<br>
10<br>
&quot;&nbsp;f&nbsp;e&nbsp;l&nbsp;h&nbsp;a&nbsp;s&nbsp;z&nbsp;n&nbsp;álónév&nbsp;&quot;:&nbsp;nev&nbsp;,<br>
11<br>
&quot;ö&nbsp;s&nbsp;s&nbsp;z&nbsp;e&nbsp;s&nbsp;&quot;:&nbsp;sum&nbsp;(&nbsp;k&nbsp;o&nbsp;m&nbsp;m&nbsp;e&nbsp;n&nbsp;t&nbsp;S&nbsp;z&nbsp;a&nbsp;m&nbsp;)<br>
12<br>
}<br>
13<br>
}<br>
4.6.&nbsp;ábra.&nbsp;A&nbsp;CouchDB&nbsp;map&nbsp;és&nbsp;reduce&nbsp;függvénye<br>
<b>Reduce.</b><br>
A&nbsp;Reduce&nbsp;függvény&nbsp;alkalmazása&nbsp;opcionális,&nbsp;segítségével<br>
aggregálható&nbsp;a&nbsp;map&nbsp;által&nbsp;szűrt&nbsp;információ.&nbsp;A&nbsp;4.6&nbsp;kódrészletben,&nbsp;az<br>
előző&nbsp;bekezdésben&nbsp;megismert&nbsp;map&nbsp;függvényt&nbsp;látható&nbsp;más&nbsp;formában,<br>
első&nbsp;paraméter&nbsp;itt&nbsp;a&nbsp;kommentelő&nbsp;neve&nbsp;lesz,&nbsp;a&nbsp;második&nbsp;pedig&nbsp;az&nbsp;egy,<br>
ezt&nbsp;megkapja&nbsp;a&nbsp;reduce&nbsp;és&nbsp;összesíti&nbsp;az&nbsp;egy&nbsp;névhez&nbsp;tartozó&nbsp;egyeseket,<br>
28<br>
<hr>
<A name=29></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.4.&nbsp;MONGODB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
majd&nbsp;függvény&nbsp;visszaadja&nbsp;melyik&nbsp;kommentelő&nbsp;hány&nbsp;hozzászólást&nbsp;írt<br>
eddig.<br>
Bár&nbsp;a&nbsp;CouchDB&nbsp;már&nbsp;2005&nbsp;óta&nbsp;elérhető&nbsp;a&nbsp;nagyközönség&nbsp;számára,<br>
a&nbsp;valódi&nbsp;felfutása&nbsp;2009&nbsp;és&nbsp;2010&nbsp;közt&nbsp;indult&nbsp;meg.&nbsp;Azóta&nbsp;már&nbsp;olyan<br>
cégek&nbsp;használják&nbsp;mint&nbsp;a&nbsp;svájci&nbsp;székhelyű&nbsp;Nukleáris&nbsp;Kutatások&nbsp;Ta-<br>
nácsa,&nbsp;a&nbsp;CERN,&nbsp;ahol&nbsp;évente&nbsp;az&nbsp;adatbázisba&nbsp;körülbelül&nbsp;10&nbsp;petabájt<br>
információ&nbsp;kerül&nbsp;be.<i>CERN&nbsp;-&nbsp;CouchDB&nbsp;and&nbsp;Physics&nbsp;</i>2010<br>
A&nbsp;CouchDB&nbsp;már&nbsp;rendelkezik&nbsp;saját&nbsp;hoszting&nbsp;szolgáltatóval,&nbsp;ez&nbsp;a<br>
CouchBase,&nbsp;amely&nbsp;a&nbsp;CouchDB-t&nbsp;ötvözte&nbsp;a&nbsp;Membase&nbsp;szolgáltatásaival,<br>
ezáltal&nbsp;csökkentve&nbsp;válaszidőket,&nbsp;az&nbsp;adatbázis&nbsp;terhelést&nbsp;és&nbsp;növelve&nbsp;a<br>
szolgáltatásfolytonosságot&nbsp;A&nbsp;szolgáltatás&nbsp;minőségét&nbsp;jól&nbsp;jellemzi,&nbsp;hogy<br>
-a&nbsp;CERN&nbsp;mellett,&nbsp;már&nbsp;olyan&nbsp;nagy&nbsp;cégek&nbsp;is&nbsp;használják&nbsp;mint&nbsp;a&nbsp;BBC,<br>
PayPal,&nbsp;Adobe&nbsp;és&nbsp;Vodafone.<br>
<b>4.4.</b><br>
<b>MongoDB</b><br>
MongoDB&nbsp;egy&nbsp;dokumentum-orientált&nbsp;adatbázis,&nbsp;a&nbsp;10gen&nbsp;Inc1&nbsp;cég<br>
terméke.&nbsp;A&nbsp;fejlesztés&nbsp;célja&nbsp;az&nbsp;volt,&nbsp;hogy&nbsp;egy&nbsp;skálázható&nbsp;kulcs-érték<br>
adatbázist&nbsp;hozzanak&nbsp;létre,&nbsp;amely&nbsp;kiválóan&nbsp;megoldja,&nbsp;a&nbsp;gyakran&nbsp;felme-<br>
rülő&nbsp;problémákat&nbsp;az&nbsp;alkalmazások&nbsp;fejlesztésében.<br>
A&nbsp;MongoDB-t&nbsp;egyre&nbsp;szívesebben&nbsp;választják&nbsp;komoly&nbsp;felhasználói&nbsp;bázis-<br>
sal&nbsp;rendelkező&nbsp;szolgáltatások,&nbsp;amelyek&nbsp;közül&nbsp;vannak,&nbsp;akik&nbsp;a&nbsp;korábbi<br>
relációs&nbsp;adatbázis&nbsp;rendszereiket&nbsp;teljesen&nbsp;lecserélik,&nbsp;vannak&nbsp;akik&nbsp;párhu-<br>
zamosan&nbsp;használják&nbsp;a&nbsp;két&nbsp;rendszert,&nbsp;kiaknázva&nbsp;az&nbsp;erősségeiket.&nbsp;2011-re<br>
már&nbsp;olyan&nbsp;cégek&nbsp;döntöttek&nbsp;a&nbsp;MongoDB&nbsp;mellett,&nbsp;mint&nbsp;az&nbsp;open-source<br>
szoftverek&nbsp;gyűjtőhelye&nbsp;a&nbsp;Sourceforge.net2,&nbsp;a&nbsp;„foursquare”&nbsp;közösségi&nbsp;ol-<br>
dal,&nbsp;vagy&nbsp;éppen&nbsp;a&nbsp;New&nbsp;York&nbsp;Times.<br>
110geninc<br>2sourceforge<br>
29<br>
<hr>
<A name=30></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.4.&nbsp;MONGODB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
<b>4.4.1.</b><br>
<b>Interfész</b><br>
A&nbsp;MongoDB&nbsp;kapcsolódási&nbsp;interfésze&nbsp;megegyezik&nbsp;a&nbsp;relációs&nbsp;adat-<br>
bázisoknál&nbsp;használt&nbsp;technikával,&nbsp;azaz&nbsp;natív&nbsp;driverekkel&nbsp;lehet&nbsp;kap-<br>
csolódni,&nbsp;bár&nbsp;szükség&nbsp;esetén&nbsp;kiegészíthető&nbsp;RESTful&nbsp;webszolgáltatás<br>
bővítménnyel.&nbsp;Az&nbsp;adatbázishoz&nbsp;vagy&nbsp;valamilyen&nbsp;támogatott&nbsp;progra-<br>
mozási&nbsp;nyelv,&nbsp;vagy&nbsp;a&nbsp;szerverkomponens&nbsp;mellé&nbsp;települő&nbsp;konzolos&nbsp;kliens<br>
segítségével&nbsp;férhető&nbsp;hozzá.&nbsp;A&nbsp;MongoDB-hez&nbsp;hivatalosan&nbsp;támogatott<br>
graﬁkus&nbsp;felülettel&nbsp;ellátott&nbsp;adatbáziskezelő&nbsp;nem&nbsp;készült&nbsp;még,&nbsp;azonban<br>
a&nbsp;felhasználók&nbsp;által&nbsp;készített&nbsp;kliensprogramok&nbsp;között&nbsp;már&nbsp;találunk<br>
ilyet.&nbsp;Ezek&nbsp;minőségével&nbsp;és&nbsp;használhatóságával&nbsp;vannak&nbsp;problémák,&nbsp;így<br>
a&nbsp;következő&nbsp;példák&nbsp;is&nbsp;konzol&nbsp;segítségével&nbsp;készültek.<br>
A&nbsp;konzol&nbsp;elérhető&nbsp;a&nbsp;MongoDB&nbsp;által&nbsp;támogatott&nbsp;platformokon<br>
(Windows,&nbsp;OS&nbsp;X,&nbsp;Linux,&nbsp;Solaris),&nbsp;Windows&nbsp;operációs&nbsp;rendszeren&nbsp;a<br>
parancssorba,&nbsp;míg&nbsp;Linuxon&nbsp;a&nbsp;terminálba&nbsp;beírva&nbsp;a&nbsp;<i>mongo&nbsp;</i>parancsot.<br>
A&nbsp;konzolban&nbsp;néhány&nbsp;kivételtől&nbsp;eltekintve&nbsp;(adatbázis&nbsp;létrehozás,&nbsp;listá-<br>
zás)&nbsp;az&nbsp;utasítások&nbsp;Javascript&nbsp;függvények.<br>
A&nbsp;4.7&nbsp;ábrán&nbsp;látható&nbsp;egy&nbsp;adatbázis&nbsp;létrehozása,&nbsp;ahol&nbsp;mindössze&nbsp;a&nbsp;<i>use</i><br>
<i>&lt;név&gt;&nbsp;</i>utasítás&nbsp;kiadásával,&nbsp;már&nbsp;létre&nbsp;is&nbsp;jött&nbsp;az&nbsp;adatbázis.<br>
1<br>
use&nbsp;ú&nbsp;j&nbsp;A&nbsp;d&nbsp;a&nbsp;t&nbsp;b&nbsp;ázis&nbsp;;<br>
4.7.&nbsp;ábra.&nbsp;Adatbázis&nbsp;létrehozása&nbsp;MongoDB-ben<br>
A&nbsp;gyűjtemény&nbsp;létrehozása&nbsp;sem&nbsp;sokkal&nbsp;bonyolultabb,&nbsp;mint&nbsp;látható<br>
a&nbsp;4.8&nbsp;ábrán,&nbsp;a&nbsp;<i>createCollection(&nbsp;&lt;név&gt;,&nbsp;&lt;opcionális&nbsp;paraméterek&gt;</i><br>
<i>)&nbsp;</i>parancs&nbsp;kiadásával&nbsp;jön&nbsp;létre&nbsp;az&nbsp;adott&nbsp;adatbázisban.<br>
1<br>
db&nbsp;.&nbsp;c&nbsp;r&nbsp;e&nbsp;a&nbsp;t&nbsp;e&nbsp;C&nbsp;o&nbsp;l&nbsp;l&nbsp;e&nbsp;c&nbsp;t&nbsp;i&nbsp;o&nbsp;n&nbsp;(&nbsp;&quot;újGyű&nbsp;j&nbsp;t&nbsp;e&nbsp;m&nbsp;ény&nbsp;&quot;&nbsp;);<br>
4.8.&nbsp;ábra.&nbsp;Gyűjtemény&nbsp;létrehozása&nbsp;MongoDB-ben<br>
30<br>
<hr>
<A name=31></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.4.&nbsp;MONGODB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
<b>4.4.2.</b><br>
<b>Az&nbsp;adatmodell</b><br>
A&nbsp;MongoDB&nbsp;felépítése&nbsp;hasonlít&nbsp;a&nbsp;relációs&nbsp;adatbázisok&nbsp;adatszerkeze-<br>
tére,&nbsp;vannak&nbsp;adatbázisok&nbsp;és&nbsp;gyűjtemények&nbsp;(Collections).&nbsp;A&nbsp;gyűjtemény<br>
megfeleltethető&nbsp;a&nbsp;relációs&nbsp;adatbázis&nbsp;tábláinak,&nbsp;amelyek&nbsp;tartalmazzák<br>
az&nbsp;adatsorokat.&nbsp;Egy&nbsp;adatbázis&nbsp;több&nbsp;gyűjteménnyel&nbsp;is&nbsp;rendelkezhet.<br>
Nagy&nbsp;különbség,&nbsp;a&nbsp;többi&nbsp;adatbázishoz&nbsp;képest,&nbsp;ha&nbsp;itt&nbsp;egy&nbsp;új&nbsp;sort&nbsp;szú-<br>
runk&nbsp;be,&nbsp;és&nbsp;az&nbsp;adatbázis&nbsp;vagy&nbsp;a&nbsp;gyűjtemény&nbsp;nem&nbsp;létezik&nbsp;még,&nbsp;akkor<br>
automatikusan&nbsp;létrehozásra&nbsp;kerül,&nbsp;a&nbsp;konﬁgurációban&nbsp;megadott&nbsp;para-<br>
méterekkel,&nbsp;sőt&nbsp;alapértelmezetten&nbsp;automatikus&nbsp;indexeléssel.<br>
A&nbsp;gyűjtemények&nbsp;dokumentumokból&nbsp;épülnek&nbsp;fel.<br>
<b>Dokumentum</b><br>
MongoDB-ben&nbsp;a&nbsp;dokumentum&nbsp;hasonló&nbsp;szerepet&nbsp;tölt&nbsp;be&nbsp;mint&nbsp;a<br>
CouchDB-nél&nbsp;(4.3.2),&nbsp;itt&nbsp;is&nbsp;az&nbsp;adatmodell&nbsp;legalsó&nbsp;rétege.&nbsp;A&nbsp;4.9&nbsp;ábrán<br>
látható&nbsp;egy&nbsp;dokumentum.&nbsp;Megﬁgyelhető,&nbsp;hogy&nbsp;az&nbsp;adat&nbsp;itt&nbsp;is&nbsp;JSON<br>
formátumban&nbsp;jelenik&nbsp;meg,&nbsp;valójában&nbsp;ez&nbsp;azonban&nbsp;BSON,&nbsp;ugyanis&nbsp;az<br>
adatbázis&nbsp;a&nbsp;bináris&nbsp;fájlokat&nbsp;is&nbsp;ebben&nbsp;a&nbsp;struktúrában&nbsp;tárolja,&nbsp;és&nbsp;a&nbsp;JSON<br>
formátum&nbsp;speciﬁkációja&nbsp;(<i>ECMAScript&nbsp;Language&nbsp;Speciﬁcation&nbsp;</i>2009)<br>
nem&nbsp;ad&nbsp;lehetőséget&nbsp;bináris&nbsp;adatok&nbsp;tárolására.<br>
A&nbsp;dokumentumok&nbsp;mérete&nbsp;maximum&nbsp;4&nbsp;kilobájt&nbsp;lehet.<br>
Egy&nbsp;dokumentum&nbsp;létrehozását&nbsp;látható&nbsp;a&nbsp;4.10&nbsp;ábrán.<br>
A&nbsp;MongoDB&nbsp;dokumentumokban&nbsp;a&nbsp;következő&nbsp;adattípusok&nbsp;tárolhatók:<br>
•&nbsp;igaz/hamis&nbsp;értékek&nbsp;(boolean)<br>
•&nbsp;egész&nbsp;számok&nbsp;(integer)<br>
•&nbsp;lebegőpontos&nbsp;számok&nbsp;(double)<br>
31<br>
<hr>
<A name=32></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.4.&nbsp;MONGODB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
1<br>
{<br>
2<br>
&quot;&nbsp;_id&nbsp;&quot;:&nbsp;O&nbsp;b&nbsp;j&nbsp;e&nbsp;c&nbsp;t&nbsp;I&nbsp;d&nbsp;(&quot;4&nbsp;d&nbsp;a&nbsp;a&nbsp;f&nbsp;1&nbsp;a&nbsp;d&nbsp;a&nbsp;1&nbsp;1&nbsp;5&nbsp;a&nbsp;c&nbsp;8&nbsp;8&nbsp;d&nbsp;e&nbsp;8&nbsp;3&nbsp;f&nbsp;8&nbsp;f&nbsp;1&nbsp;&quot;)&nbsp;,<br>
3<br>
&quot;&nbsp;dbTípus&nbsp;&quot;:&nbsp;&quot;&nbsp;M&nbsp;o&nbsp;n&nbsp;g&nbsp;o&nbsp;D&nbsp;B&nbsp;&quot;&nbsp;,<br>
4<br>
&quot;&nbsp;relációs&nbsp;&quot;:&nbsp;<b>false&nbsp;</b>,<br>
5<br>
&quot;&nbsp;t&nbsp;u&nbsp;l&nbsp;a&nbsp;j&nbsp;d&nbsp;o&nbsp;n&nbsp;s&nbsp;ágok&nbsp;&quot;:&nbsp;[&quot;&nbsp;skálá&nbsp;z&nbsp;h&nbsp;a&nbsp;t&nbsp;ó&quot;&nbsp;,&nbsp;&quot;&nbsp;g&nbsp;y&nbsp;o&nbsp;r&nbsp;s&nbsp;&quot;&nbsp;,&nbsp;&quot;&nbsp;o&nbsp;p&nbsp;t&nbsp;i&nbsp;m&nbsp;a&nbsp;l&nbsp;i&nbsp;z&nbsp;ált&nbsp;memó&nbsp;r&nbsp;i&nbsp;a&nbsp;k&nbsp;i&nbsp;h&nbsp;a&nbsp;s&nbsp;z&nbsp;n&nbsp;álás&nbsp;&quot;]&nbsp;,<br>
6<br>
&quot;&nbsp;lé&nbsp;t&nbsp;r&nbsp;e&nbsp;h&nbsp;o&nbsp;z&nbsp;v&nbsp;a&nbsp;&quot;:&nbsp;&quot;&nbsp;Wed&nbsp;Apr&nbsp;20&nbsp;2&nbsp;0&nbsp;1&nbsp;1&nbsp;1&nbsp;7&nbsp;:&nbsp;4&nbsp;5&nbsp;:&nbsp;1&nbsp;5&nbsp;GMT&nbsp;+&nbsp;0&nbsp;2&nbsp;0&nbsp;0&nbsp;(&nbsp;C&nbsp;E&nbsp;S&nbsp;T&nbsp;)&quot;&nbsp;,<br>
7<br>
8<br>
}<br>
4.9.&nbsp;ábra.&nbsp;Egy&nbsp;egyszerű&nbsp;MongoDB&nbsp;dokumentum<br>
1<br>
db&nbsp;.újGyű&nbsp;j&nbsp;t&nbsp;e&nbsp;m&nbsp;e&nbsp;n&nbsp;y&nbsp;.&nbsp;i&nbsp;n&nbsp;s&nbsp;e&nbsp;r&nbsp;t&nbsp;({<br>
2<br>
&quot;újÉ&nbsp;r&nbsp;t&nbsp;e&nbsp;k&nbsp;&quot;:&nbsp;<b>true&nbsp;</b>,<br>
3<br>
&quot;&nbsp;lé&nbsp;t&nbsp;r&nbsp;e&nbsp;h&nbsp;o&nbsp;z&nbsp;v&nbsp;a&nbsp;&quot;:&nbsp;(&nbsp;<b>new&nbsp;</b>D&nbsp;a&nbsp;t&nbsp;e&nbsp;()&nbsp;)&nbsp;,<br>
4<br>
&quot;&nbsp;név&nbsp;&quot;:&nbsp;&quot;&nbsp;M&nbsp;o&nbsp;n&nbsp;g&nbsp;o&nbsp;D&nbsp;B&nbsp;&quot;<br>
5<br>
});<br>
4.10.&nbsp;ábra.&nbsp;Dokumentum&nbsp;létrehozása&nbsp;MongoDB-ben<br>
•&nbsp;szöveg&nbsp;(string)<br>
•&nbsp;dátum&nbsp;(Javascript&nbsp;Date)<br>
•&nbsp;reguláris&nbsp;kifejezések&nbsp;(JavaScript&nbsp;RegExp-ek)<br>
•&nbsp;objektumok&nbsp;(Javascript&nbsp;object,&nbsp;Array)<br>
•&nbsp;üres&nbsp;értékek&nbsp;(null)<br>
•&nbsp;id&nbsp;(ObjectID)<br>
<b>Lekérdezések</b><br>
A&nbsp;MongoDB-ben&nbsp;történő&nbsp;lekérdezések&nbsp;alapja&nbsp;is&nbsp;a&nbsp;MapReduce,<br>
akárcsak&nbsp;a&nbsp;CouchDB-nél&nbsp;(4.3.2).&nbsp;Itt&nbsp;azonban&nbsp;a&nbsp;CouchDB-vel&nbsp;ellentét-<br>
ben&nbsp;nem&nbsp;kell&nbsp;megírni&nbsp;minden&nbsp;egyes&nbsp;szűrést&nbsp;vagy&nbsp;keresést&nbsp;végző&nbsp;map<br>
és&nbsp;reduce&nbsp;függvényt,&nbsp;ugyanis&nbsp;az&nbsp;adatbázisban&nbsp;megtalálható&nbsp;beépítve<br>
sok&nbsp;hasznos&nbsp;szűrési&nbsp;és&nbsp;aggregációs&nbsp;függvény.&nbsp;Viszont,&nbsp;az&nbsp;optimalizált&nbsp;a<br>
keresések&nbsp;érdekében,&nbsp;természetesen&nbsp;futtatható&nbsp;a&nbsp;saját&nbsp;map&nbsp;és&nbsp;reduce&nbsp;is.<br>
32<br>
<hr>
<A name=33></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.4.&nbsp;MONGODB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
A&nbsp;4.11&nbsp;látható&nbsp;egy&nbsp;lekérdezés,&nbsp;amely&nbsp;a&nbsp;következő&nbsp;hajtja&nbsp;végre:<br>
•&nbsp;leszűri&nbsp;azokat&nbsp;a&nbsp;sorokat&nbsp;amelyeknél,&nbsp;létezik&nbsp;<i>dbTípus&nbsp;</i>kulcs&nbsp;és&nbsp;az<br>
értéke&nbsp;ráillik&nbsp;a&nbsp;<i>mongodb&nbsp;</i>reguláris&nbsp;kifejezésre(eltekintve&nbsp;a&nbsp;kis&nbsp;és<br>
nagybetűktől)&nbsp;(SQL&nbsp;WHERE&nbsp;záradék)<br>
•&nbsp;száz&nbsp;darabra&nbsp;csökkenti&nbsp;a&nbsp;sorok&nbsp;számát&nbsp;(SQL&nbsp;LIMIT&nbsp;záradék)<br>
•&nbsp;az&nbsp;első&nbsp;húsz&nbsp;dokumentum&nbsp;kihagyásra&nbsp;kerül,&nbsp;és&nbsp;a&nbsp;huszonegyediktől<br>
lesz&nbsp;kiválasztva&nbsp;száz&nbsp;darab&nbsp;(SQL&nbsp;LIMIT&nbsp;vagy&nbsp;OFFSET&nbsp;záradék)<br>
•&nbsp;a&nbsp;leszűrt&nbsp;dokumentumok&nbsp;sorba&nbsp;rendezése,&nbsp;<i>létrehozva&nbsp;</i>mező&nbsp;alap-<br>
ján&nbsp;csökkenő&nbsp;sorrendben&nbsp;(SQL&nbsp;ORDER&nbsp;BY&nbsp;DESC&nbsp;záradék)<br>
1<br>
db&nbsp;.&nbsp;n&nbsp;e&nbsp;w&nbsp;C&nbsp;o&nbsp;l&nbsp;l&nbsp;e&nbsp;c&nbsp;t&nbsp;i&nbsp;o&nbsp;n<br>
2<br>
.&nbsp;f&nbsp;i&nbsp;n&nbsp;d&nbsp;({<br>
3<br>
&quot;&nbsp;dbTípus&nbsp;&quot;:&nbsp;/&nbsp;m&nbsp;o&nbsp;n&nbsp;g&nbsp;o&nbsp;d&nbsp;b&nbsp;/&nbsp;i<br>
4<br>
})<br>
5<br>
.&nbsp;l&nbsp;i&nbsp;m&nbsp;i&nbsp;t&nbsp;(&nbsp;100&nbsp;)<br>
6<br>
.&nbsp;s&nbsp;k&nbsp;i&nbsp;p&nbsp;(&nbsp;20&nbsp;)<br>
7<br>
.&nbsp;s&nbsp;o&nbsp;r&nbsp;t&nbsp;({<br>
8<br>
&quot;&nbsp;lé&nbsp;t&nbsp;r&nbsp;e&nbsp;h&nbsp;o&nbsp;z&nbsp;v&nbsp;a&nbsp;&quot;:&nbsp;-1<br>
9<br>
})<br>
4.11.&nbsp;ábra.&nbsp;Keresés&nbsp;MongoDB-ben<br>
<b>4.4.3.</b><br>
<b>Fájltárolás</b><br>
A&nbsp;MongoDB-ben&nbsp;megtalálható&nbsp;az&nbsp;ún.&nbsp;<i>GridFS</i>.&nbsp;A&nbsp;GridFS&nbsp;felelős&nbsp;a<br>
fájlok&nbsp;tárolásáért&nbsp;az&nbsp;adatbázisban.&nbsp;Ha&nbsp;MongoDB-be&nbsp;beszúrásra&nbsp;kerül<br>
egy&nbsp;fájl,&nbsp;akkor&nbsp;először&nbsp;az&nbsp;adatbázis&nbsp;szétdarabolja&nbsp;szeletekre&nbsp;(chunk),<br>
melyek&nbsp;dokumentumokként&nbsp;kerülnek&nbsp;eltárolásra,&nbsp;a&nbsp;szeletek&nbsp;maximális<br>
mérete&nbsp;4&nbsp;megabájt&nbsp;lehet.<br>
A&nbsp;fájlok&nbsp;és&nbsp;a&nbsp;fájlok&nbsp;részei&nbsp;külön&nbsp;gyűjteménybe&nbsp;kerülnek.&nbsp;A&nbsp;4.12&nbsp;ábrán<br>
látható&nbsp;egy&nbsp;eltárolt&nbsp;közel&nbsp;165&nbsp;megabájtos&nbsp;zenefájl.&nbsp;A&nbsp;dokumentumban<br>
33<br>
<hr>
<A name=34></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.4.&nbsp;MONGODB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
látható&nbsp;a&nbsp;fájl&nbsp;mérete,&nbsp;a&nbsp;neve,&nbsp;az&nbsp;md5&nbsp;hash&nbsp;értéke,&nbsp;a&nbsp;feltöltése&nbsp;ideje&nbsp;és<br>
az&nbsp;eltárolt&nbsp;szeletek&nbsp;mérete.&nbsp;A&nbsp;fájl&nbsp;szeleinek&nbsp;mérete&nbsp;262&nbsp;148&nbsp;bájt&nbsp;azaz<br>
az&nbsp;adott&nbsp;fájl&nbsp;659&nbsp;részletben&nbsp;van&nbsp;eltárolva.<br>
1<br>
{<br>
2<br>
&quot;&nbsp;_id&nbsp;&quot;:&nbsp;O&nbsp;b&nbsp;j&nbsp;e&nbsp;c&nbsp;t&nbsp;I&nbsp;d&nbsp;(&quot;4&nbsp;d&nbsp;5&nbsp;7&nbsp;b&nbsp;3&nbsp;5&nbsp;f&nbsp;f&nbsp;c&nbsp;5&nbsp;4&nbsp;4&nbsp;8&nbsp;f&nbsp;4&nbsp;4&nbsp;7&nbsp;e&nbsp;4&nbsp;7&nbsp;a&nbsp;2&nbsp;1&nbsp;&quot;)&nbsp;,<br>
3<br>
&quot;&nbsp;f&nbsp;i&nbsp;l&nbsp;e&nbsp;n&nbsp;a&nbsp;m&nbsp;e&nbsp;&quot;:&nbsp;&quot;&nbsp;Letöltések&nbsp;/&nbsp;z&nbsp;e&nbsp;n&nbsp;e&nbsp;.&nbsp;mp3&nbsp;&quot;&nbsp;,<br>
4<br>
&quot;&nbsp;l&nbsp;e&nbsp;n&nbsp;g&nbsp;t&nbsp;h&nbsp;&quot;:&nbsp;1&nbsp;7&nbsp;2&nbsp;6&nbsp;7&nbsp;7&nbsp;9&nbsp;3&nbsp;2&nbsp;,<br>
5<br>
&quot;&nbsp;c&nbsp;h&nbsp;u&nbsp;n&nbsp;k&nbsp;S&nbsp;i&nbsp;z&nbsp;e&nbsp;&quot;:&nbsp;262148&nbsp;,<br>
6<br>
&quot;&nbsp;u&nbsp;p&nbsp;l&nbsp;o&nbsp;a&nbsp;d&nbsp;D&nbsp;a&nbsp;t&nbsp;e&nbsp;&quot;:&nbsp;&quot;&nbsp;Wed&nbsp;Apr&nbsp;13&nbsp;2&nbsp;0&nbsp;1&nbsp;1&nbsp;1&nbsp;1&nbsp;:&nbsp;3&nbsp;3&nbsp;:&nbsp;1&nbsp;2&nbsp;GMT&nbsp;+&nbsp;0&nbsp;1&nbsp;0&nbsp;0&nbsp;(&nbsp;CET&nbsp;)&quot;&nbsp;,<br>
7<br>
&quot;&nbsp;md5&nbsp;&quot;:&nbsp;&quot;8&nbsp;c&nbsp;d&nbsp;8&nbsp;6&nbsp;7&nbsp;a&nbsp;f&nbsp;6&nbsp;3&nbsp;a&nbsp;f&nbsp;e&nbsp;2&nbsp;f&nbsp;b&nbsp;1&nbsp;b&nbsp;a&nbsp;a&nbsp;9&nbsp;6&nbsp;9&nbsp;3&nbsp;a&nbsp;9&nbsp;d&nbsp;3&nbsp;f&nbsp;b&nbsp;b&nbsp;2&nbsp;&quot;<br>
8<br>
}<br>
4.12.&nbsp;ábra.&nbsp;A&nbsp;MongoDB-ben&nbsp;eltárolt&nbsp;fájl&nbsp;egy&nbsp;része<br>
A&nbsp;4.13&nbsp;ábrán&nbsp;az&nbsp;első&nbsp;szelet&nbsp;dokumentumja&nbsp;látható,&nbsp;amely&nbsp;rendelkezik<br>
egy&nbsp;fájl&nbsp;azonosítóval&nbsp;(&quot;ﬁles_id&quot;)&nbsp;(melyik&nbsp;fájl&nbsp;része),&nbsp;egy&nbsp;számmal,&nbsp;hogy<br>
hányadik&nbsp;szelet&nbsp;(&quot;n&quot;)&nbsp;és&nbsp;egy&nbsp;adat&nbsp;résszel&nbsp;(&quot;data&quot;),&nbsp;mely&nbsp;tartalmazza&nbsp;a<br>
bináris&nbsp;adatot.<br>
1<br>
{<br>
2<br>
&quot;&nbsp;_id&nbsp;&quot;:&nbsp;O&nbsp;b&nbsp;j&nbsp;e&nbsp;c&nbsp;t&nbsp;I&nbsp;d&nbsp;(&quot;4&nbsp;d&nbsp;5&nbsp;7&nbsp;b&nbsp;3&nbsp;5&nbsp;f&nbsp;0&nbsp;d&nbsp;0&nbsp;1&nbsp;e&nbsp;3&nbsp;5&nbsp;a&nbsp;6&nbsp;e&nbsp;9&nbsp;f&nbsp;a&nbsp;3&nbsp;0&nbsp;2&nbsp;&quot;)&nbsp;,<br>
3<br>
&quot;&nbsp;f&nbsp;i&nbsp;l&nbsp;e&nbsp;s&nbsp;_&nbsp;i&nbsp;d&nbsp;&quot;:&nbsp;O&nbsp;b&nbsp;j&nbsp;e&nbsp;c&nbsp;t&nbsp;I&nbsp;d&nbsp;(&quot;4&nbsp;d&nbsp;5&nbsp;7&nbsp;b&nbsp;3&nbsp;5&nbsp;f&nbsp;f&nbsp;c&nbsp;5&nbsp;4&nbsp;4&nbsp;8&nbsp;f&nbsp;4&nbsp;4&nbsp;7&nbsp;e&nbsp;4&nbsp;7&nbsp;a&nbsp;2&nbsp;1&nbsp;&quot;)&nbsp;,<br>
4<br>
&quot;&nbsp;n&nbsp;&quot;:&nbsp;0&nbsp;,<br>
5<br>
&quot;&nbsp;d&nbsp;a&nbsp;t&nbsp;a&nbsp;&quot;:&nbsp;B&nbsp;i&nbsp;n&nbsp;D&nbsp;a&nbsp;t&nbsp;a&nbsp;t&nbsp;y&nbsp;p&nbsp;e&nbsp;:&nbsp;2&nbsp;len&nbsp;:&nbsp;2&nbsp;6&nbsp;2&nbsp;1&nbsp;4&nbsp;8<br>
6<br>
}<br>
4.13.&nbsp;ábra.&nbsp;A&nbsp;4.12&nbsp;ábrán&nbsp;látható&nbsp;fájl&nbsp;egy&nbsp;része&nbsp;(chunk)<br>
<b>Miért&nbsp;ilyen&nbsp;a&nbsp;tárolás?</b><br>
Ennek&nbsp;a&nbsp;tárolási&nbsp;módszernek&nbsp;az&nbsp;az&nbsp;előnye,&nbsp;hogy&nbsp;ha&nbsp;van&nbsp;egy&nbsp;webes<br>
alkalmazás,&nbsp;ahol&nbsp;zenéket&nbsp;lehet&nbsp;hallgatni&nbsp;és&nbsp;a&nbsp;felhasználó&nbsp;a&nbsp;3.&nbsp;perctől<br>
kívánja&nbsp;ezt&nbsp;megtenni,&nbsp;akkor&nbsp;nem&nbsp;kell&nbsp;az&nbsp;adatbázistól&nbsp;elkérni&nbsp;az&nbsp;egész<br>
fájlt,&nbsp;mindössze&nbsp;attól&nbsp;azt&nbsp;szeletet&nbsp;kell&nbsp;elkérni,&nbsp;amelyet&nbsp;valóban&nbsp;hall-<br>
gatni&nbsp;akar&nbsp;az&nbsp;felhasználó.<br>
Továbbá&nbsp;ha&nbsp;az&nbsp;adatbázisban&nbsp;30-40&nbsp;gigabájtos&nbsp;fájlokat&nbsp;tárolása&nbsp;tör-<br>
ténik,&nbsp;amelyeket&nbsp;a&nbsp;felhasználók&nbsp;le&nbsp;akarnak&nbsp;tölteni,&nbsp;akkor&nbsp;a&nbsp;relációs<br>
34<br>
<hr>
<A name=35></a>FEJEZET&nbsp;4.&nbsp;NOSQL&nbsp;ADATBÁZISOK<br>
4.4.&nbsp;MONGODB<br>
AZ&nbsp;ÚJ&nbsp;SZEMLÉLET<br>
adatbázisban&nbsp;az&nbsp;egész&nbsp;fájlt&nbsp;le&nbsp;kell&nbsp;kérdezni,&nbsp;melyet&nbsp;az&nbsp;alkalmazás&nbsp;meg-<br>
próbál&nbsp;betölteni&nbsp;a&nbsp;memóriába,&nbsp;viszont&nbsp;ha&nbsp;a&nbsp;szerver&nbsp;nem&nbsp;rendelkezik<br>
ennyi&nbsp;memóriával,&nbsp;akkor&nbsp;nem&nbsp;tudja&nbsp;visszaadni&nbsp;a&nbsp;felhasználónak.<br>
MongoDB-ben&nbsp;a&nbsp;30-40&nbsp;gigabájtos&nbsp;fájlnál&nbsp;se&nbsp;fordulhat&nbsp;ilyen&nbsp;elő,&nbsp;mert<br>
ha&nbsp;az&nbsp;egész&nbsp;fájlt&nbsp;kéri&nbsp;el&nbsp;az&nbsp;alkalmazás,&nbsp;akkor&nbsp;is&nbsp;mindig&nbsp;csak&nbsp;egy&nbsp;szeletet<br>
ad&nbsp;oda,&nbsp;azaz&nbsp;a&nbsp;memóriában&nbsp;maximum&nbsp;4&nbsp;megabájt&nbsp;lesz&nbsp;lefoglalva.<br>
35<br>
<hr>
<A name=36></a><b>5.&nbsp;fejezet</b><br>
<b>Foursquare</b><br>
36<br>
<hr>
<A name=37></a>5.1.&nbsp;BEVEZETÉS<br>
FEJEZET&nbsp;5.&nbsp;FOURSQUARE<br>
<b>5.1.</b><br>
<b>Bevezetés</b><br>
A&nbsp;Foursquare&nbsp;egy&nbsp;helymegosztás&nbsp;alapú&nbsp;közösségi&nbsp;oldal,&nbsp;2009&nbsp;óta<br>
működik.&nbsp;Az&nbsp;oldal&nbsp;működésének&nbsp;elve,&nbsp;hogy&nbsp;ha&nbsp;elmegyünk&nbsp;például&nbsp;egy<br>
étterembe,&nbsp;akkor&nbsp;be&nbsp;tudunk&nbsp;jelentkezni,&nbsp;hogy&nbsp;az&nbsp;adott&nbsp;helyen&nbsp;vagyunk,<br>
ilyenkor&nbsp;kaphatunk&nbsp;az&nbsp;étteremben&nbsp;kedvezményt&nbsp;illetve&nbsp;a&nbsp;barátaink&nbsp;lát-<br>
hatják,&nbsp;hogy&nbsp;jelenleg&nbsp;hol&nbsp;tartózkodunk.&nbsp;Mint&nbsp;a&nbsp;leírásból&nbsp;is&nbsp;kiderül&nbsp;az<br>
oldal&nbsp;alapvetően&nbsp;mobileszközökön&nbsp;használható&nbsp;jól,&nbsp;mert&nbsp;minden&nbsp;beje-<br>
lentkezés&nbsp;az&nbsp;aktuális&nbsp;földrajzi&nbsp;helyzetünkhöz&nbsp;képest&nbsp;ajánlja&nbsp;fel&nbsp;a&nbsp;he-<br>
lyeket.&nbsp;A&nbsp;helyzetmeghatározás&nbsp;történhet&nbsp;GPS&nbsp;pozíció,&nbsp;GSM&nbsp;tornyok<br>
beháromszögelése&nbsp;és&nbsp;a&nbsp;W3C&nbsp;HTML5&nbsp;draftjában&nbsp;található&nbsp;geolokalizá-<br>
ció&nbsp;alapján&nbsp;is.&nbsp;<i>foursquare&nbsp;</i>2011<br>
A&nbsp;foursquare-t&nbsp;azért&nbsp;választottam&nbsp;bemutatandó&nbsp;példának,&nbsp;mert<br>
dokumentum-orientált&nbsp;adatbázist&nbsp;használ,&nbsp;és&nbsp;az&nbsp;egyik&nbsp;legrégebbi<br>
MongoDB-t&nbsp;használó,&nbsp;komoly&nbsp;felhasználóbázissal&nbsp;rendelkező&nbsp;szolgálta-<br>
tás.&nbsp;A&nbsp;közösségi&nbsp;oldal&nbsp;2011&nbsp;áprilisában&nbsp;mintegy&nbsp;8&nbsp;millió&nbsp;felhasználóval<br>
rendelkezik&nbsp;és&nbsp;ez&nbsp;a&nbsp;szám&nbsp;naponta&nbsp;körülbelül&nbsp;35&nbsp;ezerrel&nbsp;növekszik.&nbsp;A&nbsp;fel-<br>
használók&nbsp;naponta&nbsp;körülbelül&nbsp;2,5&nbsp;milliószor&nbsp;jelentkeznek&nbsp;be&nbsp;(az&nbsp;előző<br>
évben&nbsp;megközelítőleg&nbsp;fél&nbsp;milliárd&nbsp;becsekkolás&nbsp;történt),&nbsp;ennek&nbsp;ellenére<br>
a&nbsp;szolgáltatás&nbsp;mögött&nbsp;álló&nbsp;Foursquare&nbsp;Labs,&nbsp;Inc.&nbsp;mindössze&nbsp;60&nbsp;alkal-<br>
mazottal&nbsp;rendelkezik.&nbsp;<b>foursquarecom_numbers</b><br>
Az&nbsp;alkalmazás&nbsp;az&nbsp;Amazon&nbsp;EC2-ben1&nbsp;elhelyezett&nbsp;25&nbsp;darab&nbsp;szerveren<br>
fut,&nbsp;scalaban2&nbsp;írva.&nbsp;A&nbsp;rendszer&nbsp;indulásakor&nbsp;PostgreSQL&nbsp;adatbázist<br>
használt,&nbsp;azonban&nbsp;a&nbsp;felhasználók&nbsp;és&nbsp;bejelentkezések&nbsp;számának&nbsp;növeke-<br>
désével,&nbsp;fejlesztők&nbsp;kénytelenek&nbsp;voltak&nbsp;az&nbsp;adatbázis&nbsp;réteg&nbsp;cseréje&nbsp;mellett<br>
dönteni,&nbsp;mivel&nbsp;a&nbsp;relációs&nbsp;rendszer&nbsp;skálázása&nbsp;(mind&nbsp;a&nbsp;szétosztás,&nbsp;mind<br>
a&nbsp;replikáció)&nbsp;komoly&nbsp;problémát&nbsp;jelentett.&nbsp;A&nbsp;választás&nbsp;a&nbsp;MongoDB-<br>
re&nbsp;esett,&nbsp;amelyhez&nbsp;a&nbsp;szerverek&nbsp;átalakítására&nbsp;volt&nbsp;szükség,&nbsp;ugyanis&nbsp;a<br>
NoSQL&nbsp;adatbázisok,&nbsp;a&nbsp;lemezre&nbsp;írás&nbsp;és&nbsp;lemezről&nbsp;olvasás&nbsp;helyett,&nbsp;a&nbsp;me-<br>
1Amazon&nbsp;EC2<br>2scala<br>
37<br>
<hr>
<A name=38></a>5.2.&nbsp;MONGODB&nbsp;A&nbsp;FOURSQUARE-NÉL<br>
FEJEZET&nbsp;5.&nbsp;FOURSQUARE<br>
móriát&nbsp;használják,&nbsp;ezzel&nbsp;csökkentve&nbsp;a&nbsp;lekérdezések&nbsp;idejét.&nbsp;Azonban&nbsp;a<br>
PostgreSQL,&nbsp;a&nbsp;mai&nbsp;napig&nbsp;használatban&nbsp;van&nbsp;(az&nbsp;adatok&nbsp;rögzítése&nbsp;nem<br>
csak&nbsp;a&nbsp;MongoDB-be&nbsp;kerül&nbsp;írásra,&nbsp;hanem&nbsp;a&nbsp;relációs&nbsp;adatbázisba&nbsp;is),<br>
tehát&nbsp;egyfajta&nbsp;biztonsági&nbsp;mentésként&nbsp;üzemel.<br>
<b>5.2.</b><br>
<b>MongoDB&nbsp;a&nbsp;Foursquare-nél</b><br>
Ahogyan&nbsp;az&nbsp;előző&nbsp;pontban&nbsp;olvasható,&nbsp;a&nbsp;szervereket&nbsp;át&nbsp;kellett&nbsp;ala-<br>
kítani&nbsp;a&nbsp;MongoDB-hez,&nbsp;ez&nbsp;annyit&nbsp;jelent,&nbsp;hogy&nbsp;bővítették&nbsp;a&nbsp;memóriát<br>
66&nbsp;GB-ig,&nbsp;amellyel&nbsp;elérték,&nbsp;hogy&nbsp;a&nbsp;legtöbb&nbsp;információ&nbsp;eléréséhez&nbsp;nem<br>
kell,&nbsp;a&nbsp;merevlemezről&nbsp;olvasni,&nbsp;ugyanis&nbsp;elfér&nbsp;a&nbsp;memóriában.<br>
<b>5.2.1.</b><br>
<b>Előnyök</b><br>
<b>Skálázhatóság.</b><br>
A&nbsp;foursquare,&nbsp;mint&nbsp;jelenleg&nbsp;feltörekvő&nbsp;szolgáltatás,&nbsp;a<br>
folyamatosan&nbsp;felhasználónövekedés&nbsp;miatt,&nbsp;folyamatosan&nbsp;szükséges&nbsp;a<br>
szerverkapacitás&nbsp;bővítése.&nbsp;A&nbsp;hardveres&nbsp;bővítést&nbsp;az&nbsp;Amazon&nbsp;oldja&nbsp;meg,<br>
míg&nbsp;az&nbsp;új&nbsp;adatbáziskezelő&nbsp;bekapcsolása&nbsp;a&nbsp;szolgáltatásba&nbsp;a&nbsp;foursqu-<br>
are&nbsp;dolga,&nbsp;amely&nbsp;szerencsére&nbsp;nem&nbsp;bonyolult&nbsp;MongoDB&nbsp;segítségével,<br>
mindössze&nbsp;be&nbsp;kell&nbsp;állítani&nbsp;az&nbsp;elosztást&nbsp;végző&nbsp;szerveren&nbsp;az&nbsp;új&nbsp;eszköz<br>
paramétereit,&nbsp;és&nbsp;onnantól&nbsp;kezdve&nbsp;az&nbsp;adatok&nbsp;szétosztása&nbsp;és&nbsp;lekérdezése<br>
automatikusan&nbsp;működik.<br>
<b>Geolokalizáció.</b><br>
Mivel&nbsp;a&nbsp;szolgáltatás&nbsp;alapja&nbsp;a&nbsp;lokalizált&nbsp;találat,&nbsp;és&nbsp;a<br>
MongoDB-ben&nbsp;megtalálható&nbsp;földrajzi&nbsp;koordináták&nbsp;indexelése,&nbsp;ezért&nbsp;a<br>
legközelebbi&nbsp;helyek&nbsp;megtalálásának&nbsp;és&nbsp;listázásának&nbsp;rövid&nbsp;válaszidejét<br>
nagyban&nbsp;elősegíti&nbsp;az&nbsp;adatbázisnak&nbsp;ez&nbsp;a&nbsp;funkciója&nbsp;(<i>Foursquare&nbsp;&amp;&nbsp;Mon-</i><br>
<i>goDB&nbsp;</i>2010a).<br>
<b>Rövid&nbsp;válaszidők.</b><br>
A&nbsp;rövid&nbsp;válaszidőknek&nbsp;köszönhetően&nbsp;az&nbsp;alkalmazás<br>
még&nbsp;több&nbsp;kérést&nbsp;tud&nbsp;indítani&nbsp;az&nbsp;adatbázis&nbsp;felé,&nbsp;amely&nbsp;még&nbsp;többet&nbsp;ki<br>
38<br>
<hr>
<A name=39></a>5.2.&nbsp;MONGODB&nbsp;A&nbsp;FOURSQUARE-NÉL<br>
FEJEZET&nbsp;5.&nbsp;FOURSQUARE<br>
tud&nbsp;szolgálni,&nbsp;ez&nbsp;a&nbsp;szám&nbsp;a&nbsp;foursquare-nél&nbsp;5000&nbsp;kérés&nbsp;másodpercenként<br>
(<i>Q&nbsp;and&nbsp;A&nbsp;from&nbsp;Scaling&nbsp;foursquare&nbsp;with&nbsp;MongoDB&nbsp;</i>2010).<br>
<b>5.2.2.</b><br>
<b>Hátrányok</b><br>
<b>Indexelt&nbsp;mezők&nbsp;méretének&nbsp;limitálása.</b><br>
Az&nbsp;indexelt&nbsp;mezők&nbsp;korlátja&nbsp;egy<br>
kilobájt,&nbsp;a&nbsp;foursquare-nél&nbsp;ez&nbsp;komoly&nbsp;problémákat&nbsp;okoz,&nbsp;ugyanis&nbsp;az&nbsp;egy-<br>
egy&nbsp;helyhez&nbsp;több&nbsp;tíz&nbsp;vagy&nbsp;akár&nbsp;száz&nbsp;kulcsszó&nbsp;is&nbsp;tartozhat.&nbsp;Az&nbsp;indexelés<br>
limitálásával&nbsp;a&nbsp;kulcsszavak&nbsp;egy&nbsp;része&nbsp;lesz&nbsp;csak&nbsp;felindexelve,&nbsp;míg&nbsp;a&nbsp;többi<br>
kulcsszóra&nbsp;a&nbsp;keresés&nbsp;lehetetlenné&nbsp;válik.&nbsp;A&nbsp;foursquare,&nbsp;ezt&nbsp;a&nbsp;problémát&nbsp;a<br>
sok&nbsp;kulcsszóval&nbsp;rendelkező&nbsp;helyeknél,&nbsp;az&nbsp;indexelés&nbsp;kihagyásával&nbsp;kerülte<br>
meg&nbsp;(<i>Foursquare&nbsp;&amp;&nbsp;MongoDB&nbsp;</i>2010b).<br>
39<br>
<hr>
<A name=40></a><b>6.&nbsp;fejezet</b><br>
<b>Összefoglalás</b><br>
40<br>
<hr>
<A name=41></a>FEJEZET&nbsp;6.&nbsp;ÖSSZEFOGLALÁS<br>
Az&nbsp;NoSQL&nbsp;adatbázisok&nbsp;kiváló&nbsp;megoldást&nbsp;nyújthatnak&nbsp;a&nbsp;mai&nbsp;szoft-<br>
verek&nbsp;által&nbsp;támasztott&nbsp;igényekre,&nbsp;azonban&nbsp;fontos&nbsp;hangsúlyozni,&nbsp;hogy<br>
amíg&nbsp;a&nbsp;felhasználó&nbsp;nem&nbsp;ismeri&nbsp;a&nbsp;relációs&nbsp;rendszereket,&nbsp;illetve&nbsp;a&nbsp;relá-<br>
ciós&nbsp;adatbázisok&nbsp;határait&nbsp;addig&nbsp;biztosan&nbsp;nincs&nbsp;szükség&nbsp;dokumentum-<br>
orientált&nbsp;adatbázisra.<br>
Egy&nbsp;pénzügyi&nbsp;rendszerben,&nbsp;amely&nbsp;tranzakció-orientált&nbsp;és&nbsp;pesszimista<br>
zárolást&nbsp;alkalmaz,&nbsp;nincs&nbsp;szükség&nbsp;dokumentum-orientált&nbsp;adatbázisra,<br>
ráadásul&nbsp;(ha&nbsp;mégis&nbsp;a&nbsp;bevezetnék)&nbsp;nem&nbsp;biztos,&nbsp;hogy&nbsp;az&nbsp;átállás&nbsp;megté-<br>
rülne.<br>
Viszont&nbsp;a&nbsp;közösségi&nbsp;oldalaknál,&nbsp;ahol&nbsp;a&nbsp;rugalmas&nbsp;adatkötések&nbsp;domi-<br>
nálnak,&nbsp;sok&nbsp;fájlt&nbsp;kell&nbsp;tárolni&nbsp;(fényképek,&nbsp;videók),&nbsp;illetve&nbsp;a&nbsp;válaszidők<br>
rendkívül&nbsp;fontosak,&nbsp;ott&nbsp;érdemes&nbsp;elgondolkodni&nbsp;a&nbsp;váltásban.&nbsp;A&nbsp;legna-<br>
gyobb&nbsp;közösségi&nbsp;oldalak&nbsp;már&nbsp;felismerték&nbsp;ezeket&nbsp;a&nbsp;lehetőségeket&nbsp;és&nbsp;már<br>
váltottak&nbsp;(foursquare),&nbsp;vagy&nbsp;épp&nbsp;folyamatban&nbsp;van&nbsp;váltás&nbsp;(Facebook,<br>
Twitter).<br>
41<br>
<hr>
<A name=42></a><b>Felhasznált&nbsp;irodalom</b><br>
Anderson&nbsp;J.&nbsp;Chris,&nbsp;Lehnardt&nbsp;Jan,&nbsp;Slater&nbsp;Noah&nbsp;(2010).&nbsp;<i>CouchDB:&nbsp;The&nbsp;Deﬁnitive</i><br>
<i>Guide</i>.&nbsp;O’Reilly&nbsp;Media,&nbsp;p.&nbsp;39.<br>
<i>CERN&nbsp;-&nbsp;CouchDB&nbsp;and&nbsp;Physics&nbsp;</i>(Aug.&nbsp;2010).&nbsp;url:&nbsp;http://www.couchbase.com/<br>
sites/default/files/pdf/case-studies/CernCB-2010Aug.pdf.<br>
<i>ECMAScript&nbsp;Language&nbsp;Speciﬁcation&nbsp;</i>(Dec.&nbsp;2009).&nbsp;url:&nbsp;http&nbsp;:&nbsp;/&nbsp;/&nbsp;www&nbsp;.&nbsp;ecma&nbsp;-<br>
international.org/publications/files/ecma-st/ECMA-262.pdf.<br>
<i>foursquare&nbsp;</i>(Apr.&nbsp;2011).&nbsp;url:&nbsp;http://www.foursquare.com.<br>
<i>Foursquare&nbsp;&amp;&nbsp;MongoDB&nbsp;</i>(May&nbsp;2010a).&nbsp;url:&nbsp;http://docs.google.com/present/<br>
view?id=dhkkqm6q_13gm6jq5fv.<br>
<i>Foursquare&nbsp;&amp;&nbsp;MongoDB&nbsp;</i>(May&nbsp;2010b).&nbsp;url:&nbsp;http://blip.tv/file/3704098.<br>
Gajdos&nbsp;Sándor&nbsp;(2006).&nbsp;<i>Adatbázisok</i>.&nbsp;Műegyetemi&nbsp;Kiadó,&nbsp;p.&nbsp;4.<br>
<i>Introduction&nbsp;to&nbsp;CouchDB&nbsp;Views&nbsp;</i>(Jan.&nbsp;2011).&nbsp;url:&nbsp;http://wiki.apache.org/<br>
couchdb/Introduction_to_CouchDB_views.<br>
<i>Q&nbsp;and&nbsp;A&nbsp;from&nbsp;Scaling&nbsp;foursquare&nbsp;with&nbsp;MongoDB&nbsp;</i>(Dec.&nbsp;2010).&nbsp;url:&nbsp;http://www.<br>
10gen.com/video/misc/foursquareqa.<br>
42<br>
<hr>
</BODY>
</HTML>
